<!DOCTYPE html>
<html>
<head>
    <title>GATE Rank Predictor 2026 | Complete Analysis | By RAJ BITTU</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(to right, #1a237e, #311b92);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }
        
        .developer-credit {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            backdrop-filter: blur(5px);
        }
        
        .content {
            padding: 30px;
        }
        
        .tabs {
            display: flex;
            background: #f5f5f5;
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }
        
        .tab.active {
            background: white;
            border-bottom: 3px solid #667eea;
            color: #667eea;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .input-sections {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .input-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }
        
        .input-section h3 {
            color: #1a237e;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-icon {
            font-size: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 1rem;
        }
        
        select, input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        select:focus, input:focus {
            border-color: #667eea;
            outline: none;
        }
        
        .input-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .input-row > div {
            flex: 1;
        }
        
        .predict-btn {
            background: linear-gradient(to right, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 18px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            transition: transform 0.3s;
            margin-top: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .predict-btn:hover {
            transform: translateY(-2px);
        }
        
        .results {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
            display: none;
        }
        
        .results h2 {
            margin-bottom: 20px;
            font-size: 2rem;
            text-align: center;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .result-card {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            backdrop-filter: blur(5px);
        }
        
        .result-card h3 {
            font-size: 1.1rem;
            margin-bottom: 10px;
            opacity: 0.9;
        }
        
        .result-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .result-subtext {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .graph-container {
            background: rgba(0, 0, 0, 0.3); /* Changed from blue to dark background */
            padding: 25px;
            border-radius: 10px;
            margin-top: 30px;
            height: 400px;
            position: relative;
        }
        
        .qualification-status {
            background: rgba(255,255,255,0.3);
            padding: 20px;
            border-radius: 10px;
            margin-top: 25px;
            text-align: center;
        }
        
        .qualified {
            color: #4CAF50;
            font-weight: bold;
            font-size: 1.3rem;
        }
        
        .not-qualified {
            color: #f44336;
            font-weight: bold;
            font-size: 1.3rem;
        }
        
        .category-ranks {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 25px;
        }
        
        .category-card {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .category-name {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .category-rank {
            font-size: 1.3rem;
            font-weight: bold;
            margin-top: 5px;
        }
        
        /* Combined College & PSU Section - CHANGED TO WHITE BACKGROUND */
        .opportunities-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-top: 30px;
            border: 1px solid #e0e0e0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .opportunity-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .opportunity-column h3 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.4rem;
            color: #1a237e;
        }
        
        .college-list, .psu-list {
            list-style: none;
        }
        
        .college-item, .psu-item {
            background: #f8f9fa;
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid #e9ecef;
        }
        
        .college-name, .psu-name {
            font-weight: 600;
            font-size: 1rem;
            color: #333;
        }
        
        .college-score, .psu-cutoff {
            font-size: 0.9rem;
            background: white;
            padding: 4px 12px;
            border-radius: 15px;
            border: 1px solid #ddd;
            color: #333;
            font-weight: bold;
        }
        
        .chance-indicator {
            font-size: 0.8rem;
            padding: 3px 10px;
            border-radius: 12px;
            margin-top: 5px;
            display: inline-block;
            font-weight: 600;
        }
        
        .high-chance {
            background: #e8f5e9;
            color: #4CAF50;
            border: 1px solid #c8e6c9;
        }
        
        .medium-chance {
            background: #fff3e0;
            color: #FF9800;
            border: 1px solid #ffe0b2;
        }
        
        .low-chance {
            background: #ffebee;
            color: #F44336;
            border: 1px solid #ffcdd2;
        }
        
        .opportunity-status {
            text-align: center;
            margin: 20px 0;
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
        }
        
        /* IIT/NIT Cutoff Section - CHANGED TO BLACK BACKGROUND */
        .cutoff-section {
            margin-top: 40px;
            background: black;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            border: 1px solid #333;
        }
        
        .cutoff-header {
            background: linear-gradient(to right, #1a237e, #311b92);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .cutoff-tabs {
            display: flex;
            background: #222;
            border-bottom: 1px solid #444;
            flex-wrap: wrap;
        }
        
        .cutoff-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            min-width: 200px;
            color: #ddd;
        }
        
        .cutoff-tab.active {
            background: #333;
            border-bottom: 3px solid #667eea;
            color: #667eea;
        }
        
        .cutoff-content {
            padding: 20px;
            display: none;
            overflow-x: auto;
            background: black;
            color: white;
        }
        
        .cutoff-content.active {
            display: block;
        }
        
        .cutoff-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            min-width: 800px;
            background: #111;
        }
        
        .cutoff-table th {
            background: linear-gradient(to right, #667eea, #764ba2);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
            border: 1px solid #333;
        }
        
        .cutoff-table td {
            padding: 12px;
            text-align: center;
            border: 1px solid #333;
            vertical-align: middle;
            color: #ddd;
        }
        
        .cutoff-table tr:nth-child(even) {
            background-color: #222;
        }
        
        .cutoff-table tr:hover {
            background-color: #333;
        }
        
        .score-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
            min-width: 70px;
            text-align: center;
            color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .score-high {
            background: linear-gradient(135deg, #4CAF50, #45a049);
        }
        
        .score-medium {
            background: linear-gradient(135deg, #FF9800, #f57c00);
        }
        
        .score-low {
            background: linear-gradient(135deg, #f44336, #d32f2f);
        }
        
        .score-very-high {
            background: linear-gradient(135deg, #9C27B0, #7B1FA2);
        }
        
        .score-very-low {
            background: linear-gradient(135deg, #607D8B, #455A64);
        }
        
        .institute-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 8px;
            color: white;
        }
        
        .iit-badge {
            background: linear-gradient(135deg, #FF5722, #E64A19);
        }
        
        .nit-badge {
            background: linear-gradient(135deg, #2196F3, #1976D2);
        }
        
        .iisc-badge {
            background: linear-gradient(135deg, #9C27B0, #7B1FA2);
        }
        
        .cutoff-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .cutoff-card {
            background: #222;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            border: 1px solid #333;
            color: white;
        }
        
        .cutoff-card h3 {
            color: #667eea;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #444;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .cutoff-values {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .cutoff-value {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #333;
        }
        
        .cutoff-category {
            font-weight: 600;
            color: #ddd;
        }
        
        .cutoff-score {
            font-weight: bold;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #667eea;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .note {
            background: #fff3cd;
            border: 1px solid #ffecb5;
            color: #856404;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 0.9rem;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 0.9rem;
        }
        
        .competition-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .high-competition {
            background: #f44336;
            color: white;
        }
        
        .medium-competition {
            background: #ff9800;
            color: white;
        }
        
        .low-competition {
            background: #4CAF50;
            color: white;
        }
        
        .cutoff-info {
            font-size: 0.85rem;
            color: #666;
            margin-top: 5px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        .highlight-row {
            background-color: #333344 !important;
            font-weight: bold;
        }
        
        .auto-calc-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-top: 10px;
            display: inline-block;
        }
        
        .auto-calc-btn:hover {
            background: #5a67d8;
        }
        
        /* College list item additional info */
        .college-info, .psu-info {
            font-size: 0.8rem;
            color: #666;
            margin-top: 3px;
        }
        
        @media (max-width: 768px) {
            .input-sections {
                grid-template-columns: 1fr;
            }
            
            .category-ranks {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .opportunity-grid {
                grid-template-columns: 1fr;
            }
            
            .cutoff-tabs {
                flex-direction: column;
            }
            
            .cutoff-tab {
                min-width: 100%;
            }
            
            .results-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .cutoff-table {
                font-size: 0.9rem;
            }
            
            .cutoff-table th,
            .cutoff-table td {
                padding: 8px;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="developer-credit">Developed by RAJ BITTU</div>
            <h1>üéØ GATE 2026 Rank Predictor</h1>
            <p>Get Complete Prediction: Rank, Score, College & PSU Opportunities</p>
        </div>
        
        <div class="content">
            <div class="tabs">
                <div class="tab active" onclick="switchTab('rank')">Rank & Score Prediction</div>
            </div>
            
            <!-- Single Prediction Tab -->
            <div id="rank-tab" class="tab-content active">
                <div class="input-sections">
                    <div class="input-section">
                        <h3><span class="section-icon">üìã</span> Basic Information</h3>
                        <div class="form-group">
                            <label>Select Your Paper:</label>
                            <select id="paperCode" onchange="updateCompetition()">
                                <option value="CS">Computer Science (CS)</option>
                                <option value="EC">Electronics & Communication (EC)</option>
                                <option value="EE">Electrical Engineering (EE)</option>
                                <option value="ME">Mechanical Engineering (ME)</option>
                                <option value="CE">Civil Engineering (CE)</option>
                            </select>
                            <div class="cutoff-info">
                                <span id="competitionBadge" class="competition-badge high-competition">High Competition</span>
                                <span id="cutoffInfo">GEN Cutoff: 29.20</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Your Category:</label>
                            <select id="category">
                                <option value="GEN">General (GEN)</option>
                                <option value="EWS">EWS</option>
                                <option value="OBC">OBC-NCL</option>
                                <option value="SC">SC</option>
                                <option value="ST">ST</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="input-section">
                        <h3><span class="section-icon">‚úèÔ∏è</span> Enter Your Answers</h3>
                        <div class="form-group">
                            <label>For 1-mark Questions (Total: 30):</label>
                            <div class="input-row">
                                <div>
                                    <label style="font-size: 0.9rem;">Correct Answers</label>
                                    <input type="number" id="correct1" placeholder="e.g., 15" min="0" max="30" oninput="calculateMarks()">
                                </div>
                                <div>
                                    <label style="font-size: 0.9rem;">Wrong Answers</label>
                                    <input type="number" id="wrong1" placeholder="e.g., 5" min="0" max="30" oninput="calculateMarks()">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>For 2-mark Questions (Total: 35):</label>
                            <div class="input-row">
                                <div>
                                    <label style="font-size: 0.9rem;">Correct Answers</label>
                                    <input type="number" id="correct2" placeholder="e.g., 20" min="0" max="35" oninput="calculateMarks()">
                                </div>
                                <div>
                                    <label style="font-size: 0.9rem;">Wrong Answers</label>
                                    <input type="number" id="wrong2" placeholder="e.g., 8" min="0" max="35" oninput="calculateMarks()">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Calculated Marks (Out of 100):</label>
                            <input type="number" id="calculatedMarks" readonly style="background: #e9ecef; font-weight: bold;">
                            <div style="font-size: 0.8rem; color: #666; margin-top: 5px;">
                                Formula: (Correct √ó Marks) - (Wrong √ó 0.33 for 1-mark, 0.66 for 2-mark)
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Expected GATE Score (Out of 1000):</label>
                            <input type="number" id="expectedScore" readonly style="background: #e9ecef; font-weight: bold;">
                        </div>
                    </div>
                </div>
                
                <button class="predict-btn" onclick="predictEverything()">
                    üöÄ Predict Rank, Score, College & PSU Opportunities
                </button>
            </div>
            
            <div class="loading" id="loading">
                <div class="loader"></div>
                <p style="margin-top: 15px;">Analyzing data and generating complete prediction...</p>
            </div>
            
            <div class="results" id="results">
                <h2>üìä Your Complete GATE 2026 Prediction</h2>
                
                <div class="results-grid">
                    <div class="result-card">
                        <h3>Predicted AIR</h3>
                        <div class="result-value" id="predictedRank">--</div>
                        <div class="result-subtext" id="rankRange">Range: --</div>
                    </div>
                    
                    <div class="result-card">
                        <h3>Expected Score</h3>
                        <div class="result-value" id="predictedScore">--</div>
                        <div class="result-subtext">Out of 1000</div>
                    </div>
                    
                    <div class="result-card">
                        <h3>Marks Obtained</h3>
                        <div class="result-value" id="predictedMarks">--</div>
                        <div class="result-subtext">Out of 100</div>
                    </div>
                    
                    <div class="result-card">
                        <h3>Percentile</h3>
                        <div class="result-value" id="percentile">--</div>
                        <div class="result-subtext">Top --% of candidates</div>
                    </div>
                </div>
                
                <!-- Score Graph -->
                <div class="graph-container">
                    <h3 style="margin-bottom: 15px; text-align: center; color: white;">üìà Your Score Position in GATE 2025 Distribution</h3>
                    <canvas id="scoreChart"></canvas>
                </div>
                
                <div class="qualification-status" id="qualificationStatus">
                    <h3>üéØ GATE Qualification Status</h3>
                    <div id="qualificationResult" class="qualified">Loading...</div>
                    <div id="cutoffDetails" style="margin-top: 10px; font-size: 0.9rem;"></div>
                </div>
                
                <div style="margin-top: 30px;">
                    <h3 style="text-align: center; margin-bottom: 20px;">Category-wise Rank Estimates</h3>
                    <div class="category-ranks">
                        <div class="category-card">
                            <div class="category-name">General (GEN)</div>
                            <div class="category-rank" id="rankGEN">--</div>
                        </div>
                        <div class="category-card">
                            <div class="category-name">OBC-NCL</div>
                            <div class="category-rank" id="rankOBC">--</div>
                        </div>
                        <div class="category-card">
                            <div class="category-name">SC</div>
                            <div class="category-rank" id="rankSC">--</div>
                        </div>
                        <div class="category-card">
                            <div class="category-name">ST</div>
                            <div class="category-rank" id="rankST">--</div>
                        </div>
                    </div>
                </div>
                
                <!-- Combined College & PSU Opportunities -->
                <div class="opportunities-section" id="opportunitiesSection" style="display: none;">
                    <div class="opportunity-status" id="opportunityStatus">
                        <!-- Will show overall status -->
                    </div>
                    
                    <div class="opportunity-grid">
                        <!-- College Opportunities -->
                        <div class="opportunity-column">
                            <h3>üéì College Admission Chances</h3>
                            <ul class="college-list" id="collegeList">
                                <!-- College list will be populated here -->
                            </ul>
                            <div id="collegeSummary" style="text-align: center; margin-top: 15px; font-size: 0.9rem; color: #666;"></div>
                        </div>
                        
                        <!-- PSU Job Opportunities -->
                        <div class="opportunity-column">
                            <h3>üíº PSU Job Opportunities</h3>
                            <ul class="psu-list" id="psuList">
                                <!-- PSU list will be populated here -->
                            </ul>
                            <div id="psuSummary" style="text-align: center; margin-top: 15px; font-size: 0.9rem; color: #666;"></div>
                        </div>
                    </div>
                </div>
                
                <!-- IIT/NIT Cutoff Data Section -->
                <div class="cutoff-section" id="cutoffSection" style="display: none;">
                    <div class="cutoff-header">
                        <h2>üèõÔ∏è IIT & NIT Cutoff Data (GATE 2025)</h2>
                        <p>Based on official cutoff scores from multiple rounds</p>
                    </div>
                    
                    <div class="cutoff-tabs">
                        <div class="cutoff-tab active" onclick="switchCutoffTab('iit-cse')">IITs - CSE Cutoffs</div>
                        <div class="cutoff-tab" onclick="switchCutoffTab('nit-cse')">NITs - CSE Cutoffs</div>
                        <div class="cutoff-tab" onclick="switchCutoffTab('gate-cutoffs')">GATE Paper Cutoffs</div>
                        <div class="cutoff-tab" onclick="switchCutoffTab('top-iits')">Top IITs Summary</div>
                    </div>
                    
                    <!-- IIT CSE Cutoff -->
                    <div id="iit-cse-tab" class="cutoff-content active">
                        <div style="overflow-x: auto;">
                            <table class="cutoff-table">
                                <thead>
                                    <tr>
                                        <th>Institute</th>
                                        <th>Category</th>
                                        <th>Round 1 Scores</th>
                                        <th>Round 5 Scores</th>
                                        <th>Round 9 Scores</th>
                                        <th>Minimum Score</th>
                                    </tr>
                                </thead>
                                <tbody id="iitCseTable">
                                    <!-- IIT CSE data will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- NIT CSE Cutoff -->
                    <div id="nit-cse-tab" class="cutoff-content">
                        <div style="overflow-x: auto;">
                            <table class="cutoff-table">
                                <thead>
                                    <tr>
                                        <th>Institute</th>
                                        <th>Category</th>
                                        <th>Opening Rank</th>
                                        <th>Closing Rank</th>
                                        <th>Minimum Score</th>
                                        <th>Admission Chance</th>
                                    </tr>
                                </thead>
                                <tbody id="nitCseTable">
                                    <!-- NIT CSE data will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- GATE Cutoffs -->
                    <div id="gate-cutoffs-tab" class="cutoff-content">
                        <div class="cutoff-grid">
                            <div class="cutoff-card">
                                <h3>Computer Science (CS)<span class="institute-badge" style="background: #f44336; padding: 2px 8px; border-radius: 10px; font-size: 0.7rem;">High Competition</span></h3>
                                <div class="cutoff-values">
                                    <div class="cutoff-value"><span class="cutoff-category">GEN:</span><span class="cutoff-score score-badge score-high">29.20</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">EWS:</span><span class="cutoff-score score-badge score-medium">26.20</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">OBC:</span><span class="cutoff-score score-badge score-medium">26.20</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">SC:</span><span class="cutoff-score score-badge score-low">19.40</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">ST:</span><span class="cutoff-score score-badge score-low">19.40</span></div>
                                </div>
                            </div>
                            
                            <div class="cutoff-card">
                                <h3>Electronics (EC)<span class="institute-badge" style="background: #4CAF50; padding: 2px 8px; border-radius: 10px; font-size: 0.7rem;">Low Competition</span></h3>
                                <div class="cutoff-values">
                                    <div class="cutoff-value"><span class="cutoff-category">GEN:</span><span class="cutoff-score score-badge score-medium">25.00</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">EWS:</span><span class="cutoff-score score-badge score-medium">22.50</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">OBC:</span><span class="cutoff-score score-badge score-medium">22.50</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">SC:</span><span class="cutoff-score score-badge score-low">16.60</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">ST:</span><span class="cutoff-score score-badge score-low">16.60</span></div>
                                </div>
                            </div>
                            
                            <div class="cutoff-card">
                                <h3>Mechanical (ME)<span class="institute-badge" style="background: #4CAF50; padding: 2px 8px; border-radius: 10px; font-size: 0.7rem;">Low Competition</span></h3>
                                <div class="cutoff-values">
                                    <div class="cutoff-value"><span class="cutoff-category">GEN:</span><span class="cutoff-score score-badge score-high">35.80</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">EWS:</span><span class="cutoff-score score-badge score-medium">32.20</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">OBC:</span><span class="cutoff-score score-badge score-medium">32.20</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">SC:</span><span class="cutoff-score score-badge score-low">23.80</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">ST:</span><span class="cutoff-score score-badge score-low">23.80</span></div>
                                </div>
                            </div>
                            
                            <div class="cutoff-card">
                                <h3>Civil (CE)<span class="institute-badge" style="background: #FF9800; padding: 2px 8px; border-radius: 10px; font-size: 0.7rem;">Medium Competition</span></h3>
                                <div class="cutoff-values">
                                    <div class="cutoff-value"><span class="cutoff-category">GEN:</span><span class="cutoff-score score-badge score-high">29.20</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">EWS:</span><span class="cutoff-score score-badge score-medium">26.20</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">OBC:</span><span class="cutoff-score score-badge score-medium">26.20</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">SC:</span><span class="cutoff-score score-badge score-low">19.40</span></div>
                                    <div class="cutoff-value"><span class="cutoff-category">ST:</span><span class="cutoff-score score-badge score-low">19.40</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Top IITs Summary -->
                    <div id="top-iits-tab" class="cutoff-content">
                        <div style="overflow-x: auto;">
                            <table class="cutoff-table">
                                <thead>
                                    <tr>
                                        <th>Institute</th>
                                        <th>GEN Cutoff</th>
                                        <th>OBC Cutoff</th>
                                        <th>SC Cutoff</th>
                                        <th>ST Cutoff</th>
                                        <th>Competition Level</th>
                                    </tr>
                                </thead>
                                <tbody id="topIitsTable">
                                    <!-- Top IITs summary will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <button class="predict-btn" onclick="resetForm()" style="margin-top: 25px; background: white; color: #667eea;">
                    üîÑ Predict Again
                </button>
            </div>
            
            <div class="note">
                <strong>üìä Complete Analysis Flow:</strong> 
                ‚Ä¢ Enter your answers ‚Üí Get rank & score prediction ‚Üí See college admission chances ‚Üí Check PSU job opportunities ‚Üí View IIT/NIT cutoff data
                <br><br>
                <strong>‚ö° Competition Levels:</strong>
                ‚Ä¢ CS: High Competition (Red) | CE: Medium Competition (Orange) | EC/EE/ME: Low Competition (Green)
                <br><br>
                <strong>üèõÔ∏è Cutoff Data:</strong> Based on actual GATE 2025 admission rounds and official cutoff scores
                <br><br>
                <strong>üë®‚Äçüíª Developed by:</strong> <strong>RAJ BITTU</strong> | Complete GATE Analysis Tool
            </div>
            
            <div class="footer">
                <p>¬© 2026 GATE Rank Predictor | Complete Analysis Tool by <strong>RAJ BITTU</strong></p>
                <p style="font-size: 0.8rem; margin-top: 5px;">All predictions based on actual GATE data and trends</p>
            </div>
        </div>
    </div>

    <script>
        // GATE 2025 data
        const gate2025Data = [
            { rank: 1, score: 1000, marks: 100 },
            { rank: 4, score: 985, marks: 91.64 },
            { rank: 8, score: 976, marks: 90.75 },
            { rank: 12, score: 959, marks: 89.04 },
            { rank: 14, score: 956, marks: 88.71 },
            { rank: 32, score: 929, marks: 86.11 },
            { rank: 38, score: 922, marks: 85.43 },
            { rank: 58, score: 906, marks: 83.84 },
            { rank: 65, score: 903, marks: 83.51 },
            { rank: 130, score: 860, marks: 79.29 },
            { rank: 215, score: 833, marks: 76.69 },
            { rank: 306, score: 810, marks: 74.38 },
            { rank: 308, score: 810, marks: 74.38 },
            { rank: 336, score: 802, marks: 73.57 },
            { rank: 351, score: 797, marks: 73.16 },
            { rank: 365, score: 797, marks: 73.11 },
            { rank: 416, score: 785, marks: 71.93 },
            { rank: 532, score: 767, marks: 70.2 },
            { rank: 609, score: 757, marks: 69.21 },
            { rank: 622, score: 756, marks: 69.07 },
            { rank: 724, score: 744, marks: 67.91 },
            { rank: 1121, score: 711, marks: 64.66 },
            { rank: 1171, score: 708, marks: 64.34 },
            { rank: 1414, score: 689, marks: 62.52 },
            { rank: 1445, score: 688, marks: 62.39 },
            { rank: 1605, score: 649, marks: 58.47 },
            { rank: 2434, score: 632, marks: 56.87 },
            { rank: 2498, score: 628, marks: 56.54 },
            { rank: 3466, score: 589, marks: 52.7 },
            { rank: 4135, score: 568, marks: 50.65 },
            { rank: 5620, score: 529, marks: 46.79 },
            { rank: 6600, score: 506, marks: 44.52 },
            { rank: 9288, score: 460, marks: 40.02 },
            { rank: 11184, score: 436, marks: 37.69 },
            { rank: 11318, score: 435, marks: 37.56 },
            { rank: 11517, score: 433, marks: 37.37 },
            { rank: 12652, score: 420, marks: 36.07 },
            { rank: 14720, score: 400, marks: 34.12 },
            { rank: 18757, score: 368, marks: 31.01 },
            { rank: 19661, score: 364, marks: 30.54 },
            { rank: 23003, score: 343, marks: 28.56 }
        ];

        // GATE 2025 Cutoff Data
        const gate2025Cutoffs = {
            'CE': { GEN: 29.20, EWS: 26.20, OBC: 26.20, SC: 19.40, ST: 19.40 },
            'ME': { GEN: 35.80, EWS: 32.20, OBC: 32.20, SC: 23.80, ST: 23.80 },
            'EE': { GEN: 25.00, EWS: 22.50, OBC: 22.50, SC: 16.60, ST: 16.60 },
            'EC': { GEN: 25.00, EWS: 22.50, OBC: 22.50, SC: 16.60, ST: 16.60 },
            'CS': { GEN: 29.20, EWS: 26.20, OBC: 26.20, SC: 19.40, ST: 19.40 }
        };

        // IIT CSE Cutoff Data
        const iitCseCutoffs = [
            { institute: "IIT Bombay", category: "GEN", round1: "931,907", round5: "885,881,810", round9: "-", minScore: 810 },
            { institute: "IIT Bombay", category: "EWS", round1: "907", round5: "761", round9: "-", minScore: 761 },
            { institute: "IIT Bombay", category: "OBC", round1: "860", round5: "441", round9: "-", minScore: 441 },
            { institute: "IIT Bombay", category: "SC", round1: "872,772", round5: "-", round9: "-", minScore: 772 },
            { institute: "IIT Bombay", category: "ST", round1: "562", round5: "-", round9: "-", minScore: 562 },
            
            { institute: "IIT Delhi", category: "GEN", round1: "931", round5: "881", round9: "-", minScore: 881 },
            { institute: "IIT Delhi", category: "EWS", round1: "907", round5: "-", round9: "-", minScore: 907 },
            { institute: "IIT Delhi", category: "OBC", round1: "860", round5: "781,744", round9: "718", minScore: 718 },
            { institute: "IIT Delhi", category: "SC", round1: "-", round5: "-", round9: "-", minScore: 0 },
            { institute: "IIT Delhi", category: "ST", round1: "562,529", round5: "467", round9: "-", minScore: 467 },
            
            { institute: "IIT Madras", category: "GEN", round1: "931", round5: "931,901", round9: "-", minScore: 901 },
            { institute: "IIT Madras", category: "EWS", round1: "907", round5: "-", round9: "-", minScore: 907 },
            { institute: "IIT Madras", category: "OBC", round1: "860", round5: "802", round9: "-", minScore: 802 },
            { institute: "IIT Madras", category: "SC", round1: "872,772", round5: "-", round9: "-", minScore: 772 },
            { institute: "IIT Madras", category: "ST", round1: "-", round5: "-", round9: "-", minScore: 0 },
            
            { institute: "IIT Kanpur", category: "GEN", round1: "901,893,885", round5: "856", round9: "-", minScore: 856 },
            { institute: "IIT Kanpur", category: "EWS", round1: "907,827", round5: "-", round9: "-", minScore: 827 },
            { institute: "IIT Kanpur", category: "OBC", round1: "860", round5: "793,780", round9: "-", minScore: 780 },
            { institute: "IIT Kanpur", category: "SC", round1: "572", round5: "-", round9: "-", minScore: 572 },
            { institute: "IIT Kanpur", category: "ST", round1: "-", round5: "-", round9: "-", minScore: 0 },
            
            { institute: "IIT Kharagpur", category: "GEN", round1: "868", round5: "831", round9: "-", minScore: 831 },
            { institute: "IIT Kharagpur", category: "EWS", round1: "850", round5: "-", round9: "-", minScore: 850 },
            { institute: "IIT Kharagpur", category: "OBC", round1: "802,797", round5: "756,744,741", round9: "-", minScore: 741 },
            { institute: "IIT Kharagpur", category: "SC", round1: "872", round5: "-", round9: "-", minScore: 872 },
            { institute: "IIT Kharagpur", category: "ST", round1: "556", round5: "-", round9: "-", minScore: 556 },
            
            { institute: "IIT Roorkee", category: "GEN", round1: "901,893", round5: "831", round9: "-", minScore: 831 },
            { institute: "IIT Roorkee", category: "EWS", round1: "-", round5: "-", round9: "-", minScore: 0 },
            { institute: "IIT Roorkee", category: "OBC", round1: "744", round5: "756,731", round9: "718", minScore: 718 },
            { institute: "IIT Roorkee", category: "SC", round1: "-", round5: "-", round9: "-", minScore: 0 },
            { institute: "IIT Roorkee", category: "ST", round1: "562", round5: "-", round9: "-", minScore: 562 },
            
            { institute: "IIT Hyderabad", category: "GEN", round1: "893,881", round5: "826", round9: "-", minScore: 826 },
            { institute: "IIT Hyderabad", category: "EWS", round1: "827", round5: "-", round9: "-", minScore: 827 },
            { institute: "IIT Hyderabad", category: "OBC", round1: "-", round5: "780,664,689", round9: "-", minScore: 664 },
            { institute: "IIT Hyderabad", category: "SC", round1: "-", round5: "-", round9: "-", minScore: 0 },
            { institute: "IIT Hyderabad", category: "ST", round1: "-", round5: "-", round9: "-", minScore: 0 },
            
            { institute: "IIT Indore", category: "GEN", round1: "-", round5: "770", round9: "622", minScore: 622 },
            { institute: "IIT Indore", category: "EWS", round1: "-", round5: "756", round9: "-", minScore: 756 },
            { institute: "IIT Indore", category: "OBC", round1: "-", round5: "741", round9: "-", minScore: 741 },
            { institute: "IIT Indore", category: "SC", round1: "-", round5: "-", round9: "-", minScore: 0 },
            { institute: "IIT Indore", category: "ST", round1: "-", round5: "-", round9: "-", minScore: 0 },
            
            { institute: "IIT BHU", category: "GEN", round1: "835,802", round5: "777,718", round9: "770,706", minScore: 706 },
            { institute: "IIT BHU", category: "EWS", round1: "-", round5: "761", round9: "-", minScore: 761 },
            { institute: "IIT BHU", category: "OBC", round1: "780", round5: "744,741", round9: "-", minScore: 741 },
            { institute: "IIT BHU", category: "SC", round1: "-", round5: "-", round9: "-", minScore: 0 },
            { institute: "IIT BHU", category: "ST", round1: "-", round5: "-", round9: "-", minScore: 0 },
            
            { institute: "IISC Bangalore", category: "GEN", round1: "931,914,866,867", round5: "-", round9: "-", minScore: 866 },
            { institute: "IISC Bangalore", category: "EWS", round1: "850,827", round5: "-", round9: "-", minScore: 827 },
            { institute: "IISC Bangalore", category: "OBC", round1: "860,853", round5: "-", round9: "-", minScore: 853 },
            { institute: "IISC Bangalore", category: "SC", round1: "872,772,579", round5: "-", round9: "-", minScore: 579 },
            { institute: "IISC Bangalore", category: "ST", round1: "529,579", round5: "-", round9: "-", minScore: 529 }
        ];

        // NIT CSE Cutoff Data
        const nitCseCutoffs = [
            { institute: "NIT Trichy", category: "GEN", openingRank: 500, closingRank: 800, minScore: 750 },
            { institute: "NIT Trichy", category: "OBC", openingRank: 800, closingRank: 1200, minScore: 720 },
            { institute: "NIT Trichy", category: "SC", openingRank: 1500, closingRank: 2000, minScore: 650 },
            { institute: "NIT Trichy", category: "ST", openingRank: 2000, closingRank: 2500, minScore: 600 },
            
            { institute: "NIT Warangal", category: "GEN", openingRank: 600, closingRank: 900, minScore: 740 },
            { institute: "NIT Warangal", category: "OBC", openingRank: 900, closingRank: 1400, minScore: 710 },
            { institute: "NIT Warangal", category: "SC", openingRank: 1600, closingRank: 2200, minScore: 640 },
            { institute: "NIT Warangal", category: "ST", openingRank: 2100, closingRank: 2700, minScore: 590 },
            
            { institute: "NIT Surathkal", category: "GEN", openingRank: 700, closingRank: 1000, minScore: 730 },
            { institute: "NIT Surathkal", category: "OBC", openingRank: 1000, closingRank: 1500, minScore: 700 },
            { institute: "NIT Surathkal", category: "SC", openingRank: 1700, closingRank: 2300, minScore: 630 },
            { institute: "NIT Surathkal", category: "ST", openingRank: 2200, closingRank: 2800, minScore: 580 },
            
            { institute: "NIT Rourkela", category: "GEN", openingRank: 800, closingRank: 1200, minScore: 720 },
            { institute: "NIT Rourkela", category: "OBC", openingRank: 1200, closingRank: 1800, minScore: 690 },
            { institute: "NIT Rourkela", category: "SC", openingRank: 1900, closingRank: 2500, minScore: 620 },
            { institute: "NIT Rourkela", category: "ST", openingRank: 2400, closingRank: 3000, minScore: 570 },
            
            { institute: "NIT Calicut", category: "GEN", openingRank: 900, closingRank: 1300, minScore: 710 },
            { institute: "NIT Calicut", category: "OBC", openingRank: 1300, closingRank: 1900, minScore: 680 },
            { institute: "NIT Calicut", category: "SC", openingRank: 2000, closingRank: 2600, minScore: 610 },
            { institute: "NIT Calicut", category: "ST", openingRank: 2500, closingRank: 3200, minScore: 560 }
        ];

        // College Data with admission chances - ONLY IITs and NITs
        const colleges = [
            { name: "IIT Bombay", minScore: 900, category: "IIT", location: "Mumbai", tier: "Top" },
            { name: "IIT Delhi", minScore: 880, category: "IIT", location: "Delhi", tier: "Top" },
            { name: "IIT Madras", minScore: 870, category: "IIT", location: "Chennai", tier: "Top" },
            { name: "IIT Kanpur", minScore: 850, category: "IIT", location: "Kanpur", tier: "Top" },
            { name: "IIT Kharagpur", minScore: 840, category: "IIT", location: "Kharagpur", tier: "Top" },
            { name: "IIT Roorkee", minScore: 830, category: "IIT", location: "Roorkee", tier: "Top" },
            { name: "IIT Hyderabad", minScore: 820, category: "IIT", location: "Hyderabad", tier: "Top" },
            { name: "IIT Guwahati", minScore: 810, category: "IIT", location: "Guwahati", tier: "Top" },
            { name: "NIT Trichy", minScore: 750, category: "NIT", location: "Tiruchirappalli", tier: "Excellent" },
            { name: "NIT Warangal", minScore: 740, category: "NIT", location: "Warangal", tier: "Excellent" },
            { name: "NIT Surathkal", minScore: 730, category: "NIT", location: "Surathkal", tier: "Excellent" },
            { name: "NIT Rourkela", minScore: 720, category: "NIT", location: "Rourkela", tier: "Excellent" }
        ];

        // PSU Data with job opportunities
        const psus = [
            { name: "DRDO", minScore: 780, category: "Research", branch: "All", package: "High" },
            { name: "ISRO", minScore: 800, category: "Research", branch: "All", package: "High" },
            { name: "ONGC", minScore: 750, category: "Maharatna", branch: "All", package: "High" },
            { name: "BHEL", minScore: 720, category: "Maharatna", branch: "All", package: "High" },
            { name: "NTPC", minScore: 700, category: "Maharatna", branch: "All", package: "High" },
            { name: "GAIL", minScore: 680, category: "Maharatna", branch: "All", package: "Medium" },
            { name: "Power Grid", minScore: 690, category: "Maharatna", branch: "EE/EC", package: "High" },
            { name: "BEL", minScore: 710, category: "Navratna", branch: "EC/CS", package: "Medium" },
            { name: "IOCL", minScore: 650, category: "Maharatna", branch: "All", package: "Medium" },
            { name: "SAIL", minScore: 650, category: "Maharatna", branch: "All", package: "Medium" },
            { name: "BPCL", minScore: 670, category: "Maharatna", branch: "All", package: "Medium" },
            { name: "HPCL", minScore: 660, category: "Maharatna", branch: "All", package: "Medium" }
        ];

        let scoreChart = null;
        let userScore = 0;
        let userCategory = 'GEN';

        // Calculate marks and score
        function calculateMarks() {
            const correct1 = parseInt(document.getElementById('correct1').value) || 0;
            const wrong1 = parseInt(document.getElementById('wrong1').value) || 0;
            const correct2 = parseInt(document.getElementById('correct2').value) || 0;
            const wrong2 = parseInt(document.getElementById('wrong2').value) || 0;
            
            // Calculate marks
            const marks = (correct1 * 1) - (wrong1 * 0.33) + (correct2 * 2) - (wrong2 * 0.66);
            const finalMarks = Math.max(0, parseFloat(marks.toFixed(2)));
            
            // Calculate score from marks
            const score = marksToScore(finalMarks);
            
            // Update display
            document.getElementById('calculatedMarks').value = finalMarks.toFixed(2);
            document.getElementById('expectedScore').value = score.toFixed(2);
            
            return { marks: finalMarks, score: score };
        }

        function marksToScore(marks) {
            if (marks >= 100) return 1000;
            if (marks <= 28.56) return 343;
            
            const sortedData = [...gate2025Data].sort((a, b) => a.marks - b.marks);
            
            for (let i = 0; i < sortedData.length - 1; i++) {
                if (marks >= sortedData[i].marks && marks <= sortedData[i + 1].marks) {
                    const ratio = (marks - sortedData[i].marks) / (sortedData[i + 1].marks - sortedData[i].marks);
                    return sortedData[i].score + (sortedData[i + 1].score - sortedData[i].score) * ratio;
                }
            }
            
            return 343 + (marks - 28.56) * (657 / 71.44);
        }

        // Main prediction function
        function predictEverything() {
            // First calculate marks
            const result = calculateMarks();
            const marks = result.marks;
            userScore = result.score;
            
            if (marks === 0) {
                alert('Please enter your answer details first.');
                return;
            }
            
            // Show loading
            document.getElementById('loading').style.display = 'block';
            
            // Get inputs
            const paper = document.getElementById('paperCode').value;
            userCategory = document.getElementById('category').value;
            
            // Simulate processing
            setTimeout(() => {
                // Predict rank
                const rankPrediction = predictRank(userScore, paper, userCategory);
                
                // Check qualification
                const qualification = checkQualification(marks, paper, userCategory);
                
                // Predict college opportunities
                const collegeOpportunities = predictCollegeOpportunities(userScore, paper);
                
                // Predict PSU opportunities
                const psuOpportunities = predictPSUOpportunities(userScore, paper);
                
                // Calculate overall opportunity status
                const overallStatus = calculateOverallStatus(collegeOpportunities, psuOpportunities);
                
                // Populate cutoff tables
                populateIitCseTable();
                populateNitCseTable();
                populateTopIitsTable();
                
                // Display all results
                displayAllResults(rankPrediction, marks, userScore, qualification, collegeOpportunities, psuOpportunities, overallStatus);
                
                // Create score graph
                createScoreGraph(userScore, rankPrediction.rank);
                
                // Hide loading, show results
                document.getElementById('loading').style.display = 'none';
                document.getElementById('results').style.display = 'block';
                document.getElementById('opportunitiesSection').style.display = 'block';
                document.getElementById('cutoffSection').style.display = 'block';
                
                // Scroll to results
                document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
            }, 500);
        }

        function predictRank(score, paper, category) {
            // Competition multipliers
            const competitionMultipliers = {
                'CS': 0.7,   // High competition
                'CE': 0.85,  // Medium competition
                'EC': 1.0,   // Low competition
                'EE': 1.0,   // Low competition
                'ME': 1.0    // Low competition
            };
            
            // Base rank estimation
            let estimatedRank = estimateRankFromScore(score);
            
            // Apply competition multiplier
            estimatedRank = Math.round(estimatedRank * (competitionMultipliers[paper] || 1));
            
            // FIXED: Category adjustments - OBC should have better rank than GEN
            // SC/ST should have much better ranks
            const categoryMultipliers = {
                'GEN': 1.0,
                'EWS': 0.95,    // Slightly better than GEN
                'OBC': 0.85,    // Better than GEN
                'SC': 0.45,     // Much better than GEN
                'ST': 0.35      // Even better than SC
            };
            
            const categoryWiseRank = {};
            for (const [cat, multiplier] of Object.entries(categoryMultipliers)) {
                categoryWiseRank[cat] = Math.max(1, Math.round(estimatedRank * multiplier));
            }
            
            // Ensure logical order: ST < SC < OBC < EWS < GEN
            // This ensures that reserved categories have better ranks
            categoryWiseRank['ST'] = Math.min(categoryWiseRank['ST'], Math.round(categoryWiseRank['SC'] * 0.8));
            categoryWiseRank['SC'] = Math.min(categoryWiseRank['SC'], Math.round(categoryWiseRank['OBC'] * 0.6));
            categoryWiseRank['OBC'] = Math.min(categoryWiseRank['OBC'], Math.round(categoryWiseRank['EWS'] * 0.9));
            categoryWiseRank['EWS'] = Math.min(categoryWiseRank['EWS'], Math.round(categoryWiseRank['GEN'] * 0.95));
            
            // Calculate percentile
            const estimatedCandidates = 150000;
            const percentile = ((estimatedCandidates - estimatedRank) / estimatedCandidates * 100).toFixed(2);
            
            return {
                rank: Math.max(1, Math.round(estimatedRank * categoryMultipliers[category])),
                rankRange: `${Math.round(estimatedRank * 0.8)} - ${Math.round(estimatedRank * 1.2)}`,
                categoryWiseRank: categoryWiseRank,
                percentile: percentile
            };
        }

        function estimateRankFromScore(score) {
            if (score >= 1000) return 1;
            if (score <= 343) return 23003;
            
            const sortedData = [...gate2025Data].sort((a, b) => a.score - b.score);
            
            for (let i = 0; i < sortedData.length - 1; i++) {
                if (score >= sortedData[i].score && score <= sortedData[i + 1].score) {
                    const ratio = (score - sortedData[i].score) / (sortedData[i + 1].score - sortedData[i].score);
                    const logRank1 = Math.log(sortedData[i].rank);
                    const logRank2 = Math.log(sortedData[i + 1].rank);
                    const estimatedLogRank = logRank1 + (logRank2 - logRank1) * ratio;
                    return Math.exp(estimatedLogRank);
                }
            }
            
            return Math.pow(1000 / score, 4) * 23003;
        }

        function checkQualification(marks, paper, category) {
            const cutoffs = gate2025Cutoffs[paper] || gate2025Cutoffs['CS'];
            const cutoff = cutoffs[category] || cutoffs['GEN'];
            
            // Add some buffer for 2026
            const adjustedCutoff = cutoff - 1;
            
            return {
                qualified: marks >= adjustedCutoff,
                cutoff: cutoff,
                marks: marks,
                difference: (marks - adjustedCutoff).toFixed(2)
            };
        }

        function predictCollegeOpportunities(score, paper) {
            // Only show IITs and NITs
            const eligibleColleges = colleges.filter(college => 
                score >= college.minScore && 
                (college.category === "IIT" || college.category === "NIT")
            );
            
            // Sort by minScore (higher scores first)
            const sortedColleges = eligibleColleges.sort((a, b) => b.minScore - a.minScore);
            
            // Calculate chance for each college
            const collegesWithChance = sortedColleges.map(college => {
                let chance = 'low';
                if (score >= college.minScore + 50) chance = 'high';
                else if (score >= college.minScore + 20) chance = 'medium';
                
                return {
                    ...college,
                    chance: chance,
                    yourScore: score
                };
            });
            
            return collegesWithChance.slice(0, 6); // Return top 6 colleges
        }

        function predictPSUOpportunities(score, paper) {
            const eligiblePSUs = psus.filter(psu => 
                score >= psu.minScore && 
                (psu.branch === 'All' || psu.branch.includes(paper))
            );
            
            // Sort by minScore (higher scores first)
            const sortedPSUs = eligiblePSUs.sort((a, b) => b.minScore - a.minScore);
            
            // Calculate chance for each PSU
            const psusWithChance = sortedPSUs.map(psu => {
                let chance = 'low';
                if (score >= psu.minScore + 50) chance = 'high';
                else if (score >= psu.minScore + 20) chance = 'medium';
                
                return {
                    ...psu,
                    chance: chance,
                    yourScore: score
                };
            });
            
            return psusWithChance.slice(0, 6); // Return top 6 PSUs
        }

        function calculateOverallStatus(collegeOpportunities, psuOpportunities) {
            const totalOpportunities = collegeOpportunities.length + psuOpportunities.length;
            const highChanceCount = collegeOpportunities.filter(c => c.chance === 'high').length + 
                                   psuOpportunities.filter(p => p.chance === 'high').length;
            
            if (totalOpportunities === 0) {
                return {
                    status: 'poor',
                    message: 'You need to improve your score for better opportunities',
                    color: '#f44336'
                };
            } else if (highChanceCount >= 4) {
                return {
                    status: 'excellent',
                    message: 'Excellent opportunities for college admission and PSU jobs!',
                    color: '#4CAF50'
                };
            } else if (highChanceCount >= 2) {
                return {
                    status: 'good',
                    message: 'Good opportunities available in both colleges and PSUs',
                    color: '#FF9800'
                };
            } else {
                return {
                    status: 'moderate',
                    message: 'Moderate opportunities - consider improving your score',
                    color: '#2196F3'
                };
            }
        }

        function displayAllResults(rankPrediction, marks, score, qualification, colleges, psus, overallStatus) {
            // Display basic results
            document.getElementById('predictedRank').textContent = `AIR ${Math.round(rankPrediction.rank)}`;
            document.getElementById('rankRange').textContent = `Range: ${rankPrediction.rankRange}`;
            document.getElementById('predictedScore').textContent = score.toFixed(2);
            document.getElementById('predictedMarks').textContent = marks.toFixed(2);
            document.getElementById('percentile').textContent = `${rankPrediction.percentile}%`;
            document.getElementById('percentile').nextElementSibling.textContent = 
                `Top ${rankPrediction.percentile}% of candidates`;
            
            // Display category ranks - FIXED: Now OBC < GEN, SC < OBC, ST < SC
            document.getElementById('rankGEN').textContent = `AIR ${Math.round(rankPrediction.categoryWiseRank.GEN)}`;
            document.getElementById('rankOBC').textContent = `AIR ${Math.round(rankPrediction.categoryWiseRank.OBC)}`;
            document.getElementById('rankSC').textContent = `AIR ${Math.round(rankPrediction.categoryWiseRank.SC)}`;
            document.getElementById('rankST').textContent = `AIR ${Math.round(rankPrediction.categoryWiseRank.ST)}`;
            
            // Display qualification status
            const qualResult = document.getElementById('qualificationResult');
            const cutoffDetails = document.getElementById('cutoffDetails');
            
            if (qualification.qualified) {
                qualResult.className = 'qualified';
                qualResult.textContent = '‚úÖ QUALIFIED FOR GATE 2026';
                cutoffDetails.textContent = `Your marks: ${qualification.marks} | Cutoff: ${qualification.cutoff} | Margin: +${qualification.difference}`;
            } else {
                qualResult.className = 'not-qualified';
                qualResult.textContent = '‚ùå NOT QUALIFIED FOR GATE 2026';
                cutoffDetails.textContent = `Your marks: ${qualification.marks} | Cutoff: ${qualification.cutoff} | Required: +${Math.abs(qualification.difference)}`;
            }
            
            // Display overall opportunity status
            document.getElementById('opportunityStatus').innerHTML = `
                <span style="color: ${overallStatus.color}">${overallStatus.message}</span>
            `;
            
            // Display college opportunities
            const collegeList = document.getElementById('collegeList');
            const collegeSummary = document.getElementById('collegeSummary');
            collegeList.innerHTML = '';
            
            if (colleges.length > 0) {
                colleges.forEach(college => {
                    const li = document.createElement('li');
                    li.className = 'college-item';
                    
                    const chanceClass = college.chance === 'high' ? 'high-chance' : 
                                      college.chance === 'medium' ? 'medium-chance' : 'low-chance';
                    
                    li.innerHTML = `
                        <div>
                            <div class="college-name">${college.name}</div>
                            <div class="college-info">
                                ${college.location} ‚Ä¢ ${college.category} ‚Ä¢ ${college.tier}
                            </div>
                            <span class="chance-indicator ${chanceClass}">
                                ${college.chance.toUpperCase()} CHANCE
                            </span>
                        </div>
                        <div class="college-score">Min: ${college.minScore}</div>
                    `;
                    collegeList.appendChild(li);
                });
                
                const highChanceColleges = colleges.filter(c => c.chance === 'high').length;
                const iitCount = colleges.filter(c => c.category === 'IIT').length;
                const nitCount = colleges.filter(c => c.category === 'NIT').length;
                collegeSummary.innerHTML = `${highChanceColleges} high chance colleges | IITs: ${iitCount} | NITs: ${nitCount}`;
            } else {
                collegeList.innerHTML = '<li class="college-item">No IIT/NIT admission chances with current score</li>';
                collegeSummary.innerHTML = 'Improve your score for IIT/NIT admission opportunities';
            }
            
            // Display PSU opportunities
            const psuList = document.getElementById('psuList');
            const psuSummary = document.getElementById('psuSummary');
            psuList.innerHTML = '';
            
            if (psus.length > 0) {
                psus.forEach(psu => {
                    const li = document.createElement('li');
                    li.className = 'psu-item';
                    
                    const chanceClass = psu.chance === 'high' ? 'high-chance' : 
                                      psu.chance === 'medium' ? 'medium-chance' : 'low-chance';
                    
                    li.innerHTML = `
                        <div>
                            <div class="psu-name">${psu.name}</div>
                            <div class="psu-info">
                                ${psu.category} ‚Ä¢ Package: ${psu.package}
                            </div>
                            <span class="chance-indicator ${chanceClass}">
                                ${psu.chance.toUpperCase()} CHANCE
                            </span>
                        </div>
                        <div class="psu-cutoff">Min: ${psu.minScore}</div>
                    `;
                    psuList.appendChild(li);
                });
                
                const highChancePSUs = psus.filter(p => p.chance === 'high').length;
                psuSummary.innerHTML = `${highChancePSUs} high chance PSUs | Total: ${psus.length} PSUs`;
            } else {
                psuList.innerHTML = '<li class="psu-item">No PSU job opportunities with current score</li>';
                psuSummary.innerHTML = 'Improve your score for PSU job opportunities';
            }
        }

        function createScoreGraph(score, rank) {
            const ctx = document.getElementById('scoreChart').getContext('2d');
            
            // Destroy previous chart if exists
            if (scoreChart) {
                scoreChart.destroy();
            }
            
            // Prepare data for better visualization
            const scores = gate2025Data.map(d => d.score);
            const ranks = gate2025Data.map(d => d.rank);
            
            // Create evenly spaced points for better curve
            const step = Math.ceil(gate2025Data.length / 20);
            const plotScores = [];
            const plotRanks = [];
            
            for (let i = 0; i < gate2025Data.length; i += step) {
                plotScores.push(gate2025Data[i].score);
                plotRanks.push(gate2025Data[i].rank);
            }
            
            // Add the last point
            plotScores.push(gate2025Data[gate2025Data.length - 1].score);
            plotRanks.push(gate2025Data[gate2025Data.length - 1].rank);
            
            // Find user's position on the curve
            let userRankIndex = 0;
            for (let i = 0; i < plotRanks.length - 1; i++) {
                if (rank >= plotRanks[i] && rank <= plotRanks[i + 1]) {
                    userRankIndex = i;
                    break;
                }
            }
            if (rank < plotRanks[0]) userRankIndex = 0;
            if (rank > plotRanks[plotRanks.length - 1]) userRankIndex = plotRanks.length - 1;
            
            scoreChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: plotRanks.map(r => `Rank ${Math.round(r)}`),
                    datasets: [{
                        label: 'GATE 2025 Score Distribution',
                        data: plotScores,
                        borderColor: '#00f2fe',
                        backgroundColor: 'rgba(0, 242, 254, 0.1)',
                        fill: true,
                        tension: 0.4,
                        pointRadius: 3,
                        pointBackgroundColor: '#00f2fe',
                        borderWidth: 3
                    }, {
                        label: 'Your Position',
                        data: plotScores.map((s, i) => i === userRankIndex ? score : null),
                        pointBackgroundColor: '#ff4757',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 3,
                        pointRadius: 8,
                        showLine: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: 'white',
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if (context.datasetIndex === 0) {
                                        return `Score: ${context.parsed.y}`;
                                    } else {
                                        return `Your Score: ${context.parsed.y}`;
                                    }
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 300,
                            max: 1000,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.2)'
                            },
                            ticks: {
                                color: 'white',
                                font: {
                                    size: 12
                                }
                            },
                            title: {
                                display: true,
                                text: 'GATE Score',
                                color: 'white',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.2)'
                            },
                            ticks: {
                                color: 'white',
                                font: {
                                    size: 11
                                },
                                maxRotation: 45
                            },
                            title: {
                                display: true,
                                text: 'Rank',
                                color: 'white',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            }
                        }
                    }
                }
            });
        }

        function switchCutoffTab(tabId) {
            // Update tab buttons
            document.querySelectorAll('.cutoff-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update tab content
            document.querySelectorAll('.cutoff-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabId}-tab`).classList.add('active');
            
            // Populate table if not already done
            if (tabId === 'iit-cse') {
                populateIitCseTable();
            } else if (tabId === 'nit-cse') {
                populateNitCseTable();
            } else if (tabId === 'top-iits') {
                populateTopIitsTable();
            }
        }

        function populateIitCseTable() {
            const tableBody = document.getElementById('iitCseTable');
            tableBody.innerHTML = '';
            
            iitCseCutoffs.forEach(row => {
                const tr = document.createElement('tr');
                
                // Get badge for institute
                let badge = '';
                if (row.institute.includes('IIT')) {
                    badge = '<span class="institute-badge iit-badge">IIT</span>';
                } else if (row.institute.includes('IISC')) {
                    badge = '<span class="institute-badge iisc-badge">IISC</span>';
                }
                
                // Determine score badge color
                let scoreClass = getScoreClass(row.minScore);
                
                // Highlight row if user's score meets cutoff
                const rowClass = (userScore >= row.minScore && row.category === userCategory) ? 'highlight-row' : '';
                
                tr.innerHTML = `
                    <td class="${rowClass}"><strong>${row.institute}</strong>${badge}</td>
                    <td class="${rowClass}">${row.category}</td>
                    <td class="${rowClass}">${row.round1 || '-'}</td>
                    <td class="${rowClass}">${row.round5 || '-'}</td>
                    <td class="${rowClass}">${row.round9 || '-'}</td>
                    <td class="${rowClass}">
                        ${row.minScore > 0 ? 
                            `<span class="score-badge ${scoreClass}">${row.minScore}</span>` : 
                            `<span class="score-badge score-very-low">N/A</span>`
                        }
                    </td>
                `;
                tableBody.appendChild(tr);
            });
        }

        function populateNitCseTable() {
            const tableBody = document.getElementById('nitCseTable');
            tableBody.innerHTML = '';
            
            nitCseCutoffs.forEach(row => {
                const tr = document.createElement('tr');
                
                // Determine chance based on score
                let chance = 'Low';
                let chanceClass = 'score-low';
                if (row.minScore >= 750) {
                    chance = 'Very High';
                    chanceClass = 'score-very-high';
                } else if (row.minScore >= 700) {
                    chance = 'High';
                    chanceClass = 'score-high';
                } else if (row.minScore >= 650) {
                    chance = 'Medium';
                    chanceClass = 'score-medium';
                }
                
                // Determine score badge color
                let scoreClass = getScoreClass(row.minScore);
                
                // Highlight row if user's score meets cutoff
                const rowClass = (userScore >= row.minScore && row.category === userCategory) ? 'highlight-row' : '';
                
                tr.innerHTML = `
                    <td class="${rowClass}"><strong>${row.institute}</strong> <span class="institute-badge nit-badge">NIT</span></td>
                    <td class="${rowClass}">${row.category}</td>
                    <td class="${rowClass}">${row.openingRank}</td>
                    <td class="${rowClass}">${row.closingRank}</td>
                    <td class="${rowClass}"><span class="score-badge ${scoreClass}">${row.minScore}</span></td>
                    <td class="${rowClass}"><span class="score-badge ${chanceClass}">${chance}</span></td>
                `;
                tableBody.appendChild(tr);
            });
        }

        function populateTopIitsTable() {
            const topIits = [
                { institute: 'IIT Bombay', gen: 810, obc: 441, sc: 772, st: 562, competition: 'Very High' },
                { institute: 'IIT Delhi', gen: 881, obc: 718, sc: 0, st: 467, competition: 'Very High' },
                { institute: 'IIT Madras', gen: 901, obc: 802, sc: 772, st: 0, competition: 'Very High' },
                { institute: 'IIT Kanpur', gen: 856, obc: 780, sc: 572, st: 0, competition: 'High' },
                { institute: 'IIT Kharagpur', gen: 831, obc: 741, sc: 872, st: 556, competition: 'High' },
                { institute: 'IIT Roorkee', gen: 831, obc: 718, sc: 0, st: 562, competition: 'High' },
                { institute: 'IIT Hyderabad', gen: 826, obc: 664, sc: 0, st: 0, competition: 'Medium' },
                { institute: 'IIT Indore', gen: 622, obc: 741, sc: 0, st: 0, competition: 'Medium' },
                { institute: 'IIT BHU', gen: 706, obc: 741, sc: 0, st: 0, competition: 'Medium' }
            ];
            
            const tableBody = document.getElementById('topIitsTable');
            tableBody.innerHTML = '';
            
            topIits.forEach(row => {
                const tr = document.createElement('tr');
                
                // Highlight row if user's score meets GEN cutoff
                const rowClass = (userScore >= row.gen && userCategory === 'GEN') ? 'highlight-row' : '';
                
                tr.innerHTML = `
                    <td class="${rowClass}"><strong>${row.institute}</strong> <span class="institute-badge iit-badge">IIT</span></td>
                    <td class="${rowClass}">
                        ${row.gen > 0 ? 
                            `<span class="score-badge ${getScoreClass(row.gen)}">${row.gen}</span>` : 
                            `<span class="score-badge score-very-low">N/A</span>`
                        }
                    </td>
                    <td class="${rowClass}">
                        ${row.obc > 0 ? 
                            `<span class="score-badge ${getScoreClass(row.obc)}">${row.obc}</span>` : 
                            `<span class="score-badge score-very-low">N/A</span>`
                        }
                    </td>
                    <td class="${rowClass}">
                        ${row.sc > 0 ? 
                            `<span class="score-badge ${getScoreClass(row.sc)}">${row.sc}</span>` : 
                            `<span class="score-badge score-very-low">N/A</span>`
                        }
                    </td>
                    <td class="${rowClass}">
                        ${row.st > 0 ? 
                            `<span class="score-badge ${getScoreClass(row.st)}">${row.st}</span>` : 
                            `<span class="score-badge score-very-low">N/A</span>`
                        }
                    </td>
                    <td class="${rowClass}">
                        <span class="score-badge ${getCompetitionClass(row.competition)}">
                            ${row.competition}
                        </span>
                    </td>
                `;
                tableBody.appendChild(tr);
            });
        }

        function getScoreClass(score) {
            if (score >= 800) return 'score-very-high';
            if (score >= 700) return 'score-high';
            if (score >= 600) return 'score-medium';
            if (score >= 500) return 'score-low';
            return 'score-very-low';
        }

        function getCompetitionClass(competition) {
            switch(competition) {
                case 'Very High': return 'score-very-high';
                case 'High': return 'score-high';
                case 'Medium': return 'score-medium';
                case 'Low': return 'score-low';
                default: return 'score-very-low';
            }
        }

        function updateCompetition() {
            const paper = document.getElementById('paperCode').value;
            const badge = document.getElementById('competitionBadge');
            const cutoffInfo = document.getElementById('cutoffInfo');
            
            if (paper === 'CS') {
                badge.className = 'competition-badge high-competition';
                badge.textContent = 'High Competition';
                cutoffInfo.textContent = 'GEN Cutoff: 29.20 (2025)';
            } else if (paper === 'CE') {
                badge.className = 'competition-badge medium-competition';
                badge.textContent = 'Medium Competition';
                cutoffInfo.textContent = 'GEN Cutoff: 29.20 (2025)';
            } else {
                badge.className = 'competition-badge low-competition';
                badge.textContent = 'Low Competition';
                cutoffInfo.textContent = 'GEN Cutoff: 25.00 (2025)';
            }
        }

        function resetForm() {
            document.getElementById('correct1').value = '';
            document.getElementById('wrong1').value = '';
            document.getElementById('correct2').value = '';
            document.getElementById('wrong2').value = '';
            document.getElementById('calculatedMarks').value = '';
            document.getElementById('expectedScore').value = '';
            document.getElementById('results').style.display = 'none';
            document.getElementById('opportunitiesSection').style.display = 'none';
            document.getElementById('cutoffSection').style.display = 'none';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize
        window.onload = function() {
            updateCompetition();
            // Auto-fill sample data for demonstration
            document.getElementById('correct1').value = '18';
            document.getElementById('wrong1').value = '4';
            document.getElementById('correct2').value = '22';
            document.getElementById('wrong2').value = '6';
            calculateMarks();
        }
    </script>
</body>
</html>
