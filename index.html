<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GATE Rank Predictor 2026 ğŸ¯ | Accurate Rank & IIT Chances</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        body {
            background: var(--gradient);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 15px;
        }

        .container {
            width: 95%;
            max-width: 1100px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        /* Compact Header */
        .compact-header {
            background: linear-gradient(135deg, var(--primary) 0%, #1a2530 100%);
            color: white;
            padding: 20px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .compact-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(52, 152, 219, 0.1) 1px, transparent 1px);
            background-size: 30px 30px;
            z-index: 0;
        }

        .logo-compact {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }

        .logo-compact i {
            font-size: 2rem;
            color: var(--secondary);
            background: white;
            padding: 8px;
            border-radius: 50%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .logo-compact h1 {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .tagline {
            font-size: 0.95rem;
            opacity: 0.9;
            color: #ecf0f1;
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .tagline span {
            background: rgba(52, 152, 219, 0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            padding: 25px;
        }

        /* Compact Input Section */
        .input-section-compact {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            border: 2px solid #e0e0e0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.4rem;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(52, 152, 219, 0.2);
        }

        .section-title i {
            color: var(--secondary);
        }

        .compact-input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .compact-input-grid {
                grid-template-columns: 1fr;
            }
        }

        .paper-selector {
            grid-column: 1 / -1;
        }

        .input-group-compact {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .input-group-compact label {
            font-weight: 700;
            color: #555;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .input-group-compact input, .input-group-compact select {
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
            background: white;
        }

        .input-group-compact input:focus, .input-group-compact select:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
            transform: translateY(-2px);
        }

        /* Emoji Enhanced Quick Buttons */
        .emoji-buttons {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .emoji-btn {
            padding: 8px 14px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 600;
        }

        .emoji-btn:hover {
            background: #f0f0f0;
            transform: translateY(-2px);
        }

        .emoji-btn.active {
            background: var(--secondary);
            color: white;
            border-color: var(--secondary);
            box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3);
        }

        /* Category Buttons with Emojis */
        .category-buttons-emoji {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        @media (max-width: 600px) {
            .category-buttons-emoji {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .category-btn-emoji {
            padding: 12px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .category-btn-emoji:hover {
            background: #f0f0f0;
            transform: translateY(-2px);
        }

        .category-btn-emoji.active {
            background: var(--secondary);
            color: white;
            border-color: var(--secondary);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        /* Predict Button with Emoji */
        .predict-container {
            text-align: center;
            margin: 25px 0;
        }

        .predict-btn-emoji {
            background: linear-gradient(135deg, var(--secondary), #2980b9);
            color: white;
            border: none;
            padding: 16px 35px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }

        .predict-btn-emoji:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 30px rgba(52, 152, 219, 0.4);
        }

        .predict-btn-emoji:active {
            transform: translateY(-1px) scale(1.02);
        }

        /* Enhanced Marks Display */
        .marks-preview {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
            border: 2px solid #e0e0e0;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            text-align: center;
        }

        .marks-preview-item {
            padding: 10px;
            border-radius: 8px;
            background: #f8f9fa;
        }

        .marks-preview-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
            margin: 5px 0;
        }

        .marks-preview-label {
            color: #666;
            font-size: 0.85rem;
            font-weight: 600;
        }

        /* Enhanced Graph Section */
        .graph-section-enhanced {
            margin-top: 30px;
            background: white;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid var(--secondary);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .graph-header-enhanced {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .graph-header-enhanced h3 {
            color: var(--primary);
            font-size: 1.5rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .graph-container-enhanced {
            height: 400px;
            position: relative;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
        }

        /* Enhanced Qualification Status */
        .qualification-status-enhanced {
            text-align: center;
            margin: 20px 0;
            padding: 25px;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .qualification-status-enhanced::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--success), var(--warning), var(--danger));
        }

        .qualified-enhanced {
            background: linear-gradient(135deg, rgba(39, 174, 96, 0.1), rgba(39, 174, 96, 0.05));
            border: 3px solid var(--success);
        }

        .not-qualified-enhanced {
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(231, 76, 60, 0.05));
            border: 3px solid var(--danger);
        }

        .status-icon-emoji {
            font-size: 3.5rem;
            margin-bottom: 15px;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
        }

        .status-title-emoji {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        /* Enhanced IIT Cards */
        .iit-card-enhanced {
            background: linear-gradient(135deg, white, #f8f9fa);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border-top: 4px solid #1abc9c;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
        }

        .iit-card-enhanced:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }

        .iit-card-enhanced h5 {
            color: #0e6251;
            margin-bottom: 10px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .iit-marks-emoji {
            font-size: 1.8rem;
            font-weight: 800;
            color: #1abc9c;
            margin: 12px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* Enhanced Results Cards */
        .result-card-enhanced {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border-top: 5px solid var(--secondary);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
        }

        .result-card-enhanced:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }

        .card-value-emoji {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--secondary);
            margin: 15px 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        /* Enhanced Footer */
        .footer-enhanced {
            background: linear-gradient(135deg, var(--primary) 0%, #1a2530 100%);
            color: white;
            padding: 25px 30px;
            margin-top: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .footer-enhanced::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--secondary), #2ecc71, var(--warning));
        }

        .developer-badge-emoji {
            background: linear-gradient(135deg, var(--secondary), #2980b9);
            padding: 10px 25px;
            border-radius: 25px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
            transition: all 0.3s;
        }

        .developer-badge-emoji:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.4);
        }

        /* Loading Animation Enhanced */
        .loading-enhanced {
            display: none;
            text-align: center;
            padding: 40px;
            background: white;
            border-radius: 15px;
            margin: 20px 0;
        }

        .spinner-emoji {
            font-size: 3.5rem;
            color: var(--secondary);
            margin-bottom: 20px;
            animation: spinBounce 1.5s ease-in-out infinite;
        }

        @keyframes spinBounce {
            0%, 100% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.1); }
        }

        /* Compact Note Box */
        .note-box-compact {
            background: linear-gradient(135deg, #fff8e1, #ffeaa7);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            border-left: 4px solid var(--warning);
            font-size: 0.9rem;
        }

        .note-box-compact i {
            color: var(--warning);
            margin-right: 8px;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .container {
                width: 98%;
                border-radius: 15px;
            }

            .main-content {
                padding: 15px;
            }

            .logo-compact h1 {
                font-size: 1.5rem;
            }

            .compact-header {
                padding: 15px 20px;
            }

            .graph-container-enhanced {
                height: 300px;
            }

            .card-value-emoji {
                font-size: 2rem;
            }
        }

        @media (max-width: 480px) {
            .category-buttons-emoji {
                grid-template-columns: 1fr;
            }

            .marks-preview {
                grid-template-columns: 1fr;
            }

            .emoji-buttons {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Compact Header -->
        <header class="compact-header">
            <div class="logo-compact">
                <i class="fas fa-graduation-cap"></i>
                <h1>GATE Predictor 2026 ğŸ¯</h1>
            </div>
            <p class="tagline">
                <span>Accurate Rank Prediction</span> 
                <span>IIT Admission Chances</span>
                <span>Category-Specific Analysis</span>
            </p>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Compact Input Section -->
            <div class="input-section-compact">
                <div class="section-title">
                    <i class="fas fa-edit"></i>
                    <h2>Enter Your GATE Details ğŸ“</h2>
                </div>
                
                <div class="compact-input-grid">
                    <div class="paper-selector">
                        <div class="input-group-compact">
                            <label><i class="fas fa-file-alt"></i> Select Your Paper ğŸ“„</label>
                            <select id="paper">
                                <option value="CE">Civil Engineering (CE) ğŸ—ï¸</option>
                                <option value="ME">Mechanical Engineering (ME) âš™ï¸</option>
                                <option value="EE">Electrical Engineering (EE) âš¡</option>
                                <option value="EC">Electronics & Communication (EC) ğŸ“¡</option>
                                <option value="CS" selected>Computer Science (CS) ğŸ’»</option>
                                <option value="DA">Data Science & AI (DA) ğŸ¤–</option>
                                <option value="IN">Instrumentation Engineering (IN) ğŸ”¬</option>
                                <option value="CH">Chemical Engineering (CH) ğŸ§ª</option>
                            </select>
                        </div>
                    </div>

                    <!-- Type 1 Questions -->
                    <div class="input-group-compact">
                        <label><i class="fas fa-1"></i> 1-Mark Questions âœ…âŒ</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <div>
                                <input type="number" id="type1Correct" min="0" max="100" step="1" value="25" oninput="updateMarks()" placeholder="Correct">
                                <div class="emoji-buttons">
                                    <button class="emoji-btn" onclick="setValue('type1Correct', 20)">20 âœ…</button>
                                    <button class="emoji-btn active" onclick="setValue('type1Correct', 25)">25 âœ…</button>
                                    <button class="emoji-btn" onclick="setValue('type1Correct', 30)">30 âœ…</button>
                                </div>
                            </div>
                            <div>
                                <input type="number" id="type1Wrong" min="0" max="100" step="1" value="5" oninput="updateMarks()" placeholder="Wrong">
                                <div class="emoji-buttons">
                                    <button class="emoji-btn active" onclick="setValue('type1Wrong', 5)">5 âŒ</button>
                                    <button class="emoji-btn" onclick="setValue('type1Wrong', 8)">8 âŒ</button>
                                    <button class="emoji-btn" onclick="setValue('type1Wrong', 10)">10 âŒ</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Type 2 Questions -->
                    <div class="input-group-compact">
                        <label><i class="fas fa-2"></i> 2-Mark Questions âœ…âœ…âŒ</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                            <div>
                                <input type="number" id="type2Correct" min="0" max="50" step="1" value="18" oninput="updateMarks()" placeholder="Correct">
                                <div class="emoji-buttons">
                                    <button class="emoji-btn" onclick="setValue('type2Correct', 15)">15 âœ…âœ…</button>
                                    <button class="emoji-btn active" onclick="setValue('type2Correct', 18)">18 âœ…âœ…</button>
                                    <button class="emoji-btn" onclick="setValue('type2Correct', 20)">20 âœ…âœ…</button>
                                </div>
                            </div>
                            <div>
                                <input type="number" id="type2Wrong" min="0" max="50" step="1" value="3" oninput="updateMarks()" placeholder="Wrong">
                                <div class="emoji-buttons">
                                    <button class="emoji-btn active" onclick="setValue('type2Wrong', 3)">3 âŒ</button>
                                    <button class="emoji-btn" onclick="setValue('type2Wrong', 5)">5 âŒ</button>
                                    <button class="emoji-btn" onclick="setValue('type2Wrong', 8)">8 âŒ</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Category Selection with Emojis -->
                    <div class="input-group-compact">
                        <label><i class="fas fa-users"></i> Select Your Category ğŸ‘¥</label>
                        <div class="category-buttons-emoji">
                            <button class="category-btn-emoji active" onclick="selectCategory('GEN')">ğŸ‘¤ General</button>
                            <button class="category-btn-emoji" onclick="selectCategory('OBC')">ğŸ‘¥ OBC-NCL</button>
                            <button class="category-btn-emoji" onclick="selectCategory('EWS')">ğŸ’° EWS</button>
                            <button class="category-btn-emoji" onclick="selectCategory('SC')">âš–ï¸ SC</button>
                            <button class="category-btn-emoji" onclick="selectCategory('ST')">ğŸ¹ ST</button>
                            <button class="category-btn-emoji" onclick="selectCategory('PWD')">â™¿ PwD</button>
                        </div>
                        <input type="hidden" id="category" value="GEN">
                    </div>

                    <!-- Marks Preview -->
                    <div class="marks-preview">
                        <div class="marks-preview-item">
                            <div class="marks-preview-label">1-Mark Score</div>
                            <div class="marks-preview-value" id="type1Marks">0.00</div>
                        </div>
                        <div class="marks-preview-item">
                            <div class="marks-preview-label">2-Mark Score</div>
                            <div class="marks-preview-value" id="type2Marks">0.00</div>
                        </div>
                        <div class="marks-preview-item">
                            <div class="marks-preview-label">Total Marks</div>
                            <div class="marks-preview-value" id="totalMarks">0.00</div>
                        </div>
                    </div>

                    <!-- Compact Note -->
                    <div class="note-box-compact">
                        <p><i class="fas fa-info-circle"></i> <strong>ğŸ“ˆ Note:</strong> GATE 2026 cutoffs expected to increase by 1.5 marks. SC/ST categories have significant benefits for IIT admissions. ğŸ›ï¸</p>
                    </div>
                </div>
            </div>

            <!-- Predict Button -->
            <div class="predict-container">
                <button class="predict-btn-emoji" onclick="predictRank()">
                    <i class="fas fa-bolt"></i> 
                    ğŸš€ PREDICT MY RANK & IIT CHANCES ğŸ¯
                </button>
            </div>

            <!-- Loading Animation -->
            <div class="loading-enhanced" id="loading">
                <div class="spinner-emoji">ğŸ”®</div>
                <p>Analyzing your marks and IIT admission chances... ğŸ“Š</p>
                <p style="margin-top: 10px; color: #666; font-size: 0.9rem;">Calculating rank based on GATE 2025 data...</p>
            </div>

            <!-- Results Section -->
            <div class="results-section" id="resultsSection" style="display: none;">
                <div class="results-header">
                    <h2><i class="fas fa-chart-line"></i> ğŸ“Š Your Prediction Results ğŸ‰</h2>
                    <p>Based on GATE 2025 actual data with 2026 expected cutoffs ğŸ“ˆ</p>
                </div>

                <!-- Qualification Status -->
                <div class="qualification-status-enhanced" id="qualificationStatus">
                    <!-- Will be populated by JavaScript -->
                </div>

                <!-- Enhanced IIT Admission Section -->
                <div class="iit-admission" id="iitAdmissionSection">
                    <h4><i class="fas fa-university"></i> ğŸ›ï¸ IIT Admission Chances (Based on Your Category)</h4>
                    <div id="iitGridContainer">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Enhanced Results Grid -->
                <div class="results-grid">
                    <div class="result-card-enhanced">
                        <h4><i class="fas fa-trophy"></i> Expected Rank ğŸ†</h4>
                        <div class="card-value-emoji" id="predictedRank">--</div>
                        <div class="card-label">All India Rank ğŸ‡®ğŸ‡³</div>
                    </div>

                    <div class="result-card-enhanced">
                        <h4><i class="fas fa-star"></i> GATE Score â­</h4>
                        <div class="card-value-emoji" id="predictedScore">--</div>
                        <div class="card-label">Out of 1000 ğŸ’¯</div>
                    </div>

                    <div class="result-card-enhanced">
                        <h4><i class="fas fa-percentage"></i> Percentile ğŸ“ˆ</h4>
                        <div class="card-value-emoji" id="percentile">--</div>
                        <div class="card-label">Approximate ğŸ”¢</div>
                    </div>

                    <div class="result-card-enhanced">
                        <h4><i class="fas fa-chart-bar"></i> Rank Range ğŸ“Š</h4>
                        <div class="card-value-emoji" id="rankRange">--</div>
                        <div class="card-label">Â±15% variation ğŸ“</div>
                    </div>
                </div>

                <!-- Enhanced Graph Section -->
                <div class="graph-section-enhanced">
                    <div class="graph-header-enhanced">
                        <h3><i class="fas fa-chart-line"></i> ğŸ“ˆ Your Position on Rank Curve ğŸ¯</h3>
                        <p>See where you stand among GATE 2025 candidates ğŸ“Š</p>
                    </div>
                    <div class="graph-container-enhanced">
                        <canvas id="rankChart"></canvas>
                    </div>
                </div>

                <!-- Cutoff Section -->
                <div class="cutoff-section">
                    <h4><i class="fas fa-flag-checkered"></i> ğŸ GATE 2026 Expected Cutoff Marks</h4>
                    <div id="cutoffTableContainer">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Analysis Box -->
                <div class="analysis-box">
                    <h4><i class="fas fa-lightbulb"></i> ğŸ’¡ Analysis & Insights ğŸ§ </h4>
                    <div class="analysis-text" id="analysisText">
                        Enter your marks and click predict to see detailed analysis... ğŸ“
                    </div>
                </div>

                <!-- Check Again Button -->
                <div style="text-align: center; margin-top: 30px;">
                    <button class="check-again-btn" onclick="checkAgain()">
                        <i class="fas fa-redo"></i> ğŸ”„ CHECK AGAIN WITH DIFFERENT MARKS
                    </button>
                </div>
            </div>
        </div>

        <!-- Enhanced Footer -->
        <footer class="footer-enhanced">
            <div class="footer-content">
                <h3>GATE Rank Predictor 2026 ğŸ¯</h3>
                <p>Accurate predictions with category-specific IIT admission analysis ğŸ“Š</p>
                <div class="copyright">
                    <i class="fas fa-copyright"></i> 2025 GATE Rank Predictor
                    <div class="developer-badge-emoji">
                        <i class="fas fa-code developer-icon"></i>
                        <span class="developer-name">Developed by RAJ BITTU ğŸ‘¨â€ğŸ’»</span>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // GATE 2025 Actual Data
        const gate2025Data = [
            { rank: 1, score: 1000, marks: 100.00 },
            { rank: 4, score: 985, marks: 91.64 },
            { rank: 8, score: 976, marks: 90.75 },
            { rank: 12, score: 959, marks: 89.04 },
            { rank: 14, score: 956, marks: 88.71 },
            { rank: 32, score: 929, marks: 86.11 },
            { rank: 38, score: 922, marks: 85.43 },
            { rank: 58, score: 906, marks: 83.84 },
            { rank: 65, score: 903, marks: 83.51 },
            { rank: 130, score: 860, marks: 79.29 },
            { rank: 215, score: 833, marks: 76.69 },
            { rank: 306, score: 810, marks: 73.57 },
            { rank: 308, score: 810, marks: 74.38 },
            { rank: 336, score: 802, marks: 73.57 },
            { rank: 351, score: 797, marks: 73.16 },
            { rank: 365, score: 797, marks: 73.11 },
            { rank: 416, score: 785, marks: 71.93 },
            { rank: 532, score: 767, marks: 70.20 },
            { rank: 609, score: 757, marks: 69.21 },
            { rank: 622, score: 756, marks: 69.07 },
            { rank: 724, score: 744, marks: 67.91 },
            { rank: 1121, score: 711, marks: 64.66 },
            { rank: 1171, score: 708, marks: 64.34 },
            { rank: 1414, score: 689, marks: 62.52 },
            { rank: 1445, score: 688, marks: 62.39 },
            { rank: 1605, score: 649, marks: 58.47 },
            { rank: 2434, score: 632, marks: 56.87 },
            { rank: 2498, score: 628, marks: 56.54 },
            { rank: 3466, score: 589, marks: 52.70 },
            { rank: 4135, score: 568, marks: 50.65 },
            { rank: 5620, score: 529, marks: 46.79 },
            { rank: 6600, score: 506, marks: 44.52 },
            { rank: 9288, score: 460, marks: 40.02 },
            { rank: 11184, score: 436, marks: 37.69 },
            { rank: 11318, score: 435, marks: 37.56 },
            { rank: 11517, score: 433, marks: 37.37 },
            { rank: 12652, score: 420, marks: 36.07 },
            { rank: 14720, score: 400, marks: 34.12 },
            { rank: 18757, score: 368, marks: 31.01 },
            { rank: 19661, score: 364, marks: 30.54 },
            { rank: 23003, score: 343, marks: 28.56 }
        ];

        // GATE 2025 Cutoffs with 2026 projections (+1.5 marks)
        const gateCutoffs = {
            "CE": { GEN: 29.2, OBC: 26.2, EWS: 26.2, SC: 19.4, ST: 19.4, PWD: 19.4 },
            "ME": { GEN: 35.8, OBC: 32.2, EWS: 32.2, SC: 23.8, ST: 23.8, PWD: 23.8 },
            "EE": { GEN: 25.0, OBC: 22.5, EWS: 22.5, SC: 16.6, ST: 16.6, PWD: 16.6 },
            "EC": { GEN: 25.0, OBC: 22.5, EWS: 22.5, SC: 16.6, ST: 16.6, PWD: 16.6 },
            "CS": { GEN: 29.2, OBC: 26.2, EWS: 26.2, SC: 19.4, ST: 19.4, PWD: 19.4 },
            "DA": { GEN: 29.0, OBC: 23.0, EWS: 23.0, SC: 17.0, ST: 17.0, PWD: 17.0 },
            "IN": { GEN: 25.6, OBC: 31.8, EWS: 31.8, SC: 23.5, ST: 23.5, PWD: 23.5 },
            "CH": { GEN: 27.7, OBC: 24.9, EWS: 24.9, SC: 18.4, ST: 18.4, PWD: 18.4 }
        };

        // IIT Admission Marks by Category (Approximate ranges)
        const iitAdmissionRanges = {
            "CS": {
                "GEN": { top: "65-70+ ğŸ†", middle: "60-65 â­", lower: "55-60 âœ…" },
                "OBC": { top: "60-65 ğŸ†", middle: "55-60 â­", lower: "50-55 âœ…" },
                "EWS": { top: "60-65 ğŸ†", middle: "55-60 â­", lower: "50-55 âœ…" },
                "SC": { top: "48-53 ğŸ†", middle: "43-48 â­", lower: "38-43 âœ…" },
                "ST": { top: "45-50 ğŸ†", middle: "40-45 â­", lower: "35-40 âœ…" },
                "PWD": { top: "40-45 ğŸ†", middle: "35-40 â­", lower: "30-35 âœ…" }
            },
            "EC": {
                "GEN": { top: "60-65+ ğŸ†", middle: "55-60 â­", lower: "50-55 âœ…" },
                "OBC": { top: "55-60 ğŸ†", middle: "50-55 â­", lower: "45-50 âœ…" },
                "EWS": { top: "55-60 ğŸ†", middle: "50-55 â­", lower: "45-50 âœ…" },
                "SC": { top: "45-50 ğŸ†", middle: "40-45 â­", lower: "35-40 âœ…" },
                "ST": { top: "42-47 ğŸ†", middle: "37-42 â­", lower: "32-37 âœ…" },
                "PWD": { top: "38-43 ğŸ†", middle: "33-38 â­", lower: "28-33 âœ…" }
            },
            "EE": {
                "GEN": { top: "58-63+ ğŸ†", middle: "53-58 â­", lower: "48-53 âœ…" },
                "OBC": { top: "53-58 ğŸ†", middle: "48-53 â­", lower: "43-48 âœ…" },
                "EWS": { top: "53-58 ğŸ†", middle: "48-53 â­", lower: "43-48 âœ…" },
                "SC": { top: "43-48 ğŸ†", middle: "38-43 â­", lower: "33-38 âœ…" },
                "ST": { top: "40-45 ğŸ†", middle: "35-40 â­", lower: "30-35 âœ…" },
                "PWD": { top: "36-41 ğŸ†", middle: "31-36 â­", lower: "26-31 âœ…" }
            },
            "ME": {
                "GEN": { top: "63-68+ ğŸ†", middle: "58-63 â­", lower: "53-58 âœ…" },
                "OBC": { top: "58-63 ğŸ†", middle: "53-58 â­", lower: "48-53 âœ…" },
                "EWS": { top: "58-63 ğŸ†", middle: "53-58 â­", lower: "48-53 âœ…" },
                "SC": { top: "48-53 ğŸ†", middle: "43-48 â­", lower: "38-43 âœ…" },
                "ST": { top: "45-50 ğŸ†", middle: "40-45 â­", lower: "35-40 âœ…" },
                "PWD": { top: "40-45 ğŸ†", middle: "35-40 â­", lower: "30-35 âœ…" }
            },
            "CE": {
                "GEN": { top: "55-60+ ğŸ†", middle: "50-55 â­", lower: "45-50 âœ…" },
                "OBC": { top: "50-55 ğŸ†", middle: "45-50 â­", lower: "40-45 âœ…" },
                "EWS": { top: "50-55 ğŸ†", middle: "45-50 â­", lower: "40-45 âœ…" },
                "SC": { top: "40-45 ğŸ†", middle: "35-40 â­", lower: "30-35 âœ…" },
                "ST": { top: "37-42 ğŸ†", middle: "32-37 â­", lower: "27-32 âœ…" },
                "PWD": { top: "33-38 ğŸ†", middle: "28-33 â­", lower: "23-28 âœ…" }
            }
        };

        const cutoffIncrease2026 = 1.5;
        let rankChart = null;
        let currentCategory = 'GEN';

        // Select category function
        function selectCategory(category) {
            currentCategory = category;
            document.getElementById('category').value = category;
            
            document.querySelectorAll('.category-btn-emoji').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            updateMarks();
        }

        // Set value helper
        function setValue(elementId, value) {
            document.getElementById(elementId).value = value;
            updateMarks();
            
            const buttons = document.querySelectorAll(`[onclick*="${elementId}"]`);
            buttons.forEach(btn => {
                btn.classList.remove('active');
                if (parseInt(btn.textContent) === value) {
                    btn.classList.add('active');
                }
            });
        }

        // Update marks calculation only
        function updateMarks() {
            const type1Correct = parseInt(document.getElementById('type1Correct').value) || 0;
            const type1Wrong = parseInt(document.getElementById('type1Wrong').value) || 0;
            const type2Correct = parseInt(document.getElementById('type2Correct').value) || 0;
            const type2Wrong = parseInt(document.getElementById('type2Wrong').value) || 0;
            
            const type1Marks = type1Correct - (type1Wrong * 0.33);
            const type2Marks = (type2Correct * 2) - (type2Wrong * 0.67);
            const totalMarks = type1Marks + type2Marks;
            
            document.getElementById('type1Marks').textContent = type1Marks.toFixed(2);
            document.getElementById('type2Marks').textContent = type2Marks.toFixed(2);
            document.getElementById('totalMarks').textContent = totalMarks.toFixed(2);
        }

        // Create IIT Admission Grid with Emojis
        function createIITAdmissionGrid(paper, category, userMarks) {
            const paperData = iitAdmissionRanges[paper] || iitAdmissionRanges["CS"];
            const ranges = paperData[category] || paperData["GEN"];
            
            const iitTypes = [
                { name: "Top IITs ğŸ†", desc: "IIT Bombay/Delhi/Madras", marks: ranges.top, emoji: "ğŸ‘‘" },
                { name: "Mid IITs â­", desc: "IIT Kanpur/Kharagpur/Roorkee", marks: ranges.middle, emoji: "ğŸ¯" },
                { name: "New IITs âœ…", desc: "IIT Hyderabad/Guwahati", marks: ranges.lower, emoji: "ğŸ“" }
            ];
            
            let html = '<div class="iit-grid">';
            
            iitTypes.forEach(iit => {
                const marksNeeded = iit.marks.split('-')[0].replace(/[^0-9]/g, '');
                const isPossible = userMarks >= parseInt(marksNeeded);
                
                html += `
                    <div class="iit-card-enhanced" style="${isPossible ? 'border-top-color: var(--success);' : ''}">
                        <h5>${iit.emoji} ${iit.name}</h5>
                        <div class="iit-marks-emoji">${iit.marks}</div>
                        <div class="iit-type">${iit.desc}</div>
                        <div style="margin-top: 12px; padding: 8px; background: ${isPossible ? 'rgba(39, 174, 96, 0.1)' : 'rgba(231, 76, 60, 0.1)'}; border-radius: 8px; font-size: 0.9rem; ${isPossible ? 'color: var(--success); font-weight: 600;' : 'color: #666;'}">
                            ${isPossible ? 'ğŸ¯ Within your reach!' : 'ğŸ“ˆ Need improvement'}
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            
            // Add category-specific note with emojis
            if (category === 'SC' || category === 'ST') {
                html += `<p style="margin-top: 15px; padding: 12px; background: rgba(26, 188, 156, 0.1); border-radius: 10px; color: #0e6251; font-size: 0.95rem; text-align: center;">
                    <span style="font-size: 1.2rem;">âš–ï¸</span> <strong>Note for SC/ST:</strong> Many IITs offer admission with marks as low as 38-48 due to reservation benefits. ğŸ›ï¸
                </p>`;
            } else if (category === 'OBC' || category === 'EWS') {
                html += `<p style="margin-top: 15px; padding: 12px; background: rgba(52, 152, 219, 0.1); border-radius: 10px; color: #0e6251; font-size: 0.95rem; text-align: center;">
                    <span style="font-size: 1.2rem;">ğŸ’°</span> <strong>Note for OBC/EWS:</strong> Cutoffs are typically 5-10 marks lower than General category. ğŸ¯
                </p>`;
            }
            
            return html;
        }

        // Calculate rank from marks
        function calculateRankFromMarks(marks) {
            const sortedData = [...gate2025Data].sort((a, b) => b.marks - a.marks);
            
            if (marks > sortedData[0].marks) return 1;
            if (marks < sortedData[sortedData.length - 1].marks) {
                const last = sortedData[sortedData.length - 1];
                const secondLast = sortedData[sortedData.length - 2];
                const slope = (last.rank - secondLast.rank) / (last.marks - secondLast.marks);
                return Math.round(last.rank + (marks - last.marks) * slope);
            }
            
            for (let i = 0; i < sortedData.length - 1; i++) {
                if (marks <= sortedData[i].marks && marks >= sortedData[i + 1].marks) {
                    const lower = sortedData[i];
                    const upper = sortedData[i + 1];
                    const marksRange = lower.marks - upper.marks;
                    const rankRange = lower.rank - upper.rank;
                    const fraction = (lower.marks - marks) / marksRange;
                    return Math.round(lower.rank - (fraction * rankRange));
                }
            }
            
            return 25000;
        }

        // Calculate GATE score
        function calculateScoreFromMarks(marks) {
            const sortedData = [...gate2025Data].sort((a, b) => b.marks - a.marks);
            
            if (marks > sortedData[0].marks) return 1000;
            if (marks < sortedData[sortedData.length - 1].marks) {
                const last = sortedData[sortedData.length - 1];
                const secondLast = sortedData[sortedData.length - 2];
                const slope = (last.score - secondLast.score) / (last.marks - secondLast.marks);
                return Math.round(last.score + (marks - last.marks) * slope);
            }
            
            for (let i = 0; i < sortedData.length - 1; i++) {
                if (marks <= sortedData[i].marks && marks >= sortedData[i + 1].marks) {
                    const lower = sortedData[i];
                    const upper = sortedData[i + 1];
                    const marksRange = lower.marks - upper.marks;
                    const scoreRange = lower.score - upper.score;
                    const fraction = (lower.marks - marks) / marksRange;
                    return Math.round(lower.score - (fraction * scoreRange));
                }
            }
            
            return 300;
        }

        // Calculate percentile
        function calculatePercentile(rank) {
            const totalCandidates = 150000;
            const percentile = ((totalCandidates - rank) / totalCandidates) * 100;
            return Math.min(99.99, Math.max(0.01, percentile.toFixed(2)));
        }

        // Get cutoff for selected paper and category
        function getCutoff(paper, category) {
            const cutoffData = gateCutoffs[paper];
            if (!cutoffData) return gateCutoffs["CS"][category] + cutoffIncrease2026;
            return cutoffData[category] + cutoffIncrease2026;
        }

        // Create cutoff table
        function createCutoffTable(paper, userMarks, userCategory) {
            const cutoffData = gateCutoffs[paper] || gateCutoffs["CS"];
            const paperNames = {
                "CE": "Civil Engineering ğŸ—ï¸", "ME": "Mechanical Engineering âš™ï¸", "EE": "Electrical Engineering âš¡",
                "EC": "Electronics & Communication ğŸ“¡", "CS": "Computer Science ğŸ’»", "DA": "Data Science & AI ğŸ¤–",
                "IN": "Instrumentation Engineering ğŸ”¬", "CH": "Chemical Engineering ğŸ§ª"
            };
            
            const categoryMap = { GEN: "General ğŸ‘¤", OBC: "OBC-NCL ğŸ‘¥", EWS: "EWS ğŸ’°", SC: "SC âš–ï¸", ST: "ST ğŸ¹", PWD: "PwD â™¿" };
            
            let html = `
                <p><strong>ğŸ“„ Paper:</strong> ${paperNames[paper]} | <strong>ğŸ‘¥ Your Category:</strong> ${categoryMap[userCategory]}</p>
                <table class="cutoff-table">
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>2025 Cutoff</th>
                            <th>Expected 2026</th>
                            <th>Your Marks</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            Object.entries(categoryMap).forEach(([code, name]) => {
                const cutoff2025 = cutoffData[code];
                const cutoff2026 = cutoff2025 + cutoffIncrease2026;
                const isUserCategory = code === userCategory;
                const passes = userMarks >= cutoff2026;
                
                html += `
                    <tr ${isUserCategory ? 'class="your-cutoff"' : ''}>
                        <td><strong>${name}</strong>${isUserCategory ? ' (You ğŸ‘ˆ)' : ''}</td>
                        <td class="cutoff-value">${cutoff2025.toFixed(1)}</td>
                        <td class="cutoff-value">${cutoff2026.toFixed(1)} <span class="cutoff-diff cutoff-increase">+1.5 ğŸ“ˆ</span></td>
                        <td class="cutoff-value">${isUserCategory ? userMarks.toFixed(1) : '-'}</td>
                        <td>
                `;
                
                if (isUserCategory) {
                    if (passes) {
                        html += `<span class="cutoff-diff cutoff-pass"><i class="fas fa-check"></i> PASS ğŸ‰</span>`;
                    } else {
                        html += `<span class="cutoff-diff cutoff-fail"><i class="fas fa-times"></i> FAIL ğŸ˜”</span>`;
                    }
                } else {
                    html += `-`;
                }
                
                html += `</td></tr>`;
            });
            
            html += `</tbody></table>`;
            return html;
        }

        // Get qualification status with emojis
        function getQualificationStatus(qualified, userMarks, requiredCutoff, paper, category) {
            const categoryNames = { GEN: "General ğŸ‘¤", OBC: "OBC-NCL ğŸ‘¥", EWS: "EWS ğŸ’°", SC: "SC âš–ï¸", ST: "ST ğŸ¹", PWD: "PwD â™¿" };
            const paperNames = {
                "CE": "Civil Engineering ğŸ—ï¸", "ME": "Mechanical âš™ï¸", "EE": "Electrical âš¡",
                "EC": "Electronics ğŸ“¡", "CS": "Computer Science ğŸ’»", "DA": "Data Science ğŸ¤–",
                "IN": "Instrumentation ğŸ”¬", "CH": "Chemical ğŸ§ª"
            };
            
            const statusDiv = document.getElementById('qualificationStatus');
            const difference = Math.abs(userMarks - requiredCutoff).toFixed(1);
            
            if (qualified) {
                statusDiv.className = 'qualification-status-enhanced qualified-enhanced';
                statusDiv.innerHTML = `
                    <div class="status-icon-emoji">ğŸ‰</div>
                    <div class="status-title-emoji" style="color: var(--success);">QUALIFIED! ğŸ¯</div>
                    <div class="status-details">
                        <p>ğŸŠ Congratulations! You have cleared the GATE 2026 expected cutoff for ${paperNames[paper]} (${categoryNames[category]}).</p>
                        <p style="margin: 15px 0; padding: 10px; background: rgba(39, 174, 96, 0.1); border-radius: 10px;">
                            <strong>ğŸ“Š Your Marks:</strong> ${userMarks.toFixed(1)} | <strong>ğŸ¯ Required Cutoff:</strong> ${requiredCutoff.toFixed(1)}
                        </p>
                        <p style="font-size: 1.1rem; font-weight: 600;">âœ¨ You are <strong>${difference} marks above</strong> the expected cutoff! âœ¨</p>
                    </div>
                `;
            } else {
                statusDiv.className = 'qualification-status-enhanced not-qualified-enhanced';
                statusDiv.innerHTML = `
                    <div class="status-icon-emoji">ğŸ˜”</div>
                    <div class="status-title-emoji" style="color: var(--danger);">NOT QUALIFIED ğŸ“ˆ</div>
                    <div class="status-details">
                        <p>ğŸ“ You need to improve your score to clear the GATE 2026 expected cutoff for ${paperNames[paper]} (${categoryNames[category]}).</p>
                        <p style="margin: 15px 0; padding: 10px; background: rgba(231, 76, 60, 0.1); border-radius: 10px;">
                            <strong>ğŸ“Š Your Marks:</strong> ${userMarks.toFixed(1)} | <strong>ğŸ¯ Required Cutoff:</strong> ${requiredCutoff.toFixed(1)}
                        </p>
                        <p style="font-size: 1.1rem; font-weight: 600;">ğŸ’ª You need <strong>${difference} more marks</strong> to qualify! ğŸ’ª</p>
                    </div>
                `;
            }
        }

        // Enhanced update chart
        function updateChart(userMarks, userRank) {
            const ctx = document.getElementById('rankChart').getContext('2d');
            const chartData = gate2025Data.filter((_, index) => index % 3 === 0);
            
            if (rankChart) {
                rankChart.destroy();
            }
            
            // Calculate position for annotations
            const userPosition = {x: userRank, y: userMarks};
            
            rankChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'ğŸ“Š GATE 2025 Actual Data',
                        data: chartData.map(d => ({x: d.rank, y: d.marks})),
                        backgroundColor: 'rgba(52, 152, 219, 0.7)',
                        borderColor: 'rgba(52, 152, 219, 1)',
                        borderWidth: 2,
                        pointRadius: 6,
                        pointHoverRadius: 10
                    }, {
                        label: 'ğŸ¯ Your Position',
                        data: [userPosition],
                        backgroundColor: 'rgba(231, 76, 60, 1)',
                        borderColor: 'rgba(192, 57, 43, 1)',
                        borderWidth: 3,
                        pointRadius: 12,
                        pointHoverRadius: 16,
                        pointStyle: 'star'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {size: 14, weight: 'bold'},
                                padding: 20,
                                usePointStyle: true
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(44, 62, 80, 0.9)',
                            titleFont: {size: 14, weight: 'bold'},
                            bodyFont: {size: 13},
                            padding: 12,
                            callbacks: {
                                label: function(context) {
                                    if (context.dataset.label === 'ğŸ¯ Your Position') {
                                        return [`Rank: ${userRank.toLocaleString()}`, `Marks: ${userMarks.toFixed(2)}`, `Percentile: ${calculatePercentile(userRank)}%`];
                                    }
                                    return `Rank: ${context.parsed.x.toLocaleString()}, Marks: ${context.parsed.y.toFixed(2)}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'ğŸ† Rank (Lower is Better)',
                                font: {size: 14, weight: 'bold'},
                                padding: {top: 10, bottom: 10}
                            },
                            reverse: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: {
                                callback: value => value >= 1000 ? `${(value/1000).toFixed(0)}k` : value,
                                font: {size: 12}
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'ğŸ“ˆ Marks (out of 100)',
                                font: {size: 14, weight: 'bold'},
                                padding: {top: 10, bottom: 10}
                            },
                            min: 25,
                            max: 100,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: {
                                font: {size: 12}
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    animation: {
                        duration: 2000,
                        easing: 'easeOutQuart'
                    }
                }
            });
        }

        // Check again function
        function checkAgain() {
            document.getElementById('resultsSection').style.display = 'none';
            document.getElementById('loading').style.display = 'none';
            
            document.querySelector('.compact-header').scrollIntoView({ behavior: 'smooth' });
        }

        // Main prediction function
        function predictRank() {
            document.getElementById('loading').style.display = 'block';
            document.getElementById('resultsSection').style.display = 'none';
            
            setTimeout(() => {
                const paper = document.getElementById('paper').value;
                const category = currentCategory;
                
                const type1Correct = parseInt(document.getElementById('type1Correct').value) || 0;
                const type1Wrong = parseInt(document.getElementById('type1Wrong').value) || 0;
                const type2Correct = parseInt(document.getElementById('type2Correct').value) || 0;
                const type2Wrong = parseInt(document.getElementById('type2Wrong').value) || 0;
                
                const type1Marks = type1Correct - (type1Wrong * 0.33);
                const type2Marks = (type2Correct * 2) - (type2Wrong * 0.67);
                const userMarks = type1Marks + type2Marks;
                
                const predictedRank = calculateRankFromMarks(userMarks);
                const predictedScore = calculateScoreFromMarks(userMarks);
                const percentile = calculatePercentile(predictedRank);
                const rankLower = Math.max(1, Math.round(predictedRank * 0.85));
                const rankUpper = Math.round(predictedRank * 1.15);
                
                const requiredCutoff = getCutoff(paper, category);
                const qualified = userMarks >= requiredCutoff;
                
                // Update results with emojis
                document.getElementById('predictedRank').innerHTML = `${predictedRank.toLocaleString()} <span style="font-size: 1.5rem;">ğŸ†</span>`;
                document.getElementById('predictedScore').innerHTML = `${predictedScore} <span style="font-size: 1.5rem;">â­</span>`;
                document.getElementById('percentile').innerHTML = `${percentile}% <span style="font-size: 1.5rem;">ğŸ“ˆ</span>`;
                document.getElementById('rankRange').innerHTML = `${rankLower.toLocaleString()} - ${rankUpper.toLocaleString()} <span style="font-size: 1.5rem;">ğŸ“Š</span>`;
                
                getQualificationStatus(qualified, userMarks, requiredCutoff, paper, category);
                
                document.getElementById('cutoffTableContainer').innerHTML = createCutoffTable(paper, userMarks, category);
                
                document.getElementById('iitGridContainer').innerHTML = createIITAdmissionGrid(paper, category, userMarks);
                
                document.getElementById('analysisText').innerHTML = getAnalysisText(predictedRank, userMarks, predictedScore, qualified, paper, category);
                
                updateChart(userMarks, predictedRank);
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('resultsSection').style.display = 'block';
                
                document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
            }, 1500);
        }

        // Get analysis text with emojis
        function getAnalysisText(rank, marks, score, qualified, paper, category) {
            const categoryName = { GEN: "General ğŸ‘¤", OBC: "OBC-NCL ğŸ‘¥", EWS: "EWS ğŸ’°", SC: "SC âš–ï¸", ST: "ST ğŸ¹", PWD: "PwD â™¿" }[category];
            
            let analysis = '';
            
            if (category === 'SC' || category === 'ST') {
                analysis = `<span class="good">âš–ï¸ SC/ST Category Advantage:</span> Many IITs offer admission with marks in the range of <strong>38-53</strong> for your category. ğŸ›ï¸<br><br>`;
            } else if (category === 'OBC' || category === 'EWS') {
                analysis = `<span class="good">ğŸ’° OBC/EWS Category Benefit:</span> Cutoffs are typically <strong>5-10 marks lower</strong> than General category. ğŸ¯<br><br>`;
            }
            
            if (qualified) {
                if (rank <= 100) {
                    analysis += `<span class="excellent">ğŸ–ï¸ Excellent! With rank ${rank.toLocaleString()} in ${categoryName} category, you have excellent chances for top IITs and IISc. ğŸ‘‘</span>`;
                } else if (rank <= 500) {
                    analysis += `<span class="good">ğŸ… Great! Rank ${rank.toLocaleString()} is very competitive. You have good chances for all IITs and excellent chances for top NITs. â­</span>`;
                } else if (rank <= 1000) {
                    analysis += `<span class="good">ğŸ‘ Good performance! Rank ${rank.toLocaleString()} gives you good chances for IITs and excellent chances for NITs and IIITs. ğŸ¯</span>`;
                } else if (rank <= 3000) {
                    analysis += `<span class="average">ğŸ“Š Good score! With rank ${rank.toLocaleString()}, you have good chances for NITs, IIITs, and other good universities. ğŸ›ï¸</span>`;
                } else {
                    analysis += `<span class="average">âœ… You have qualified! Rank ${rank.toLocaleString()} gives you opportunities in various universities and colleges. ğŸ“</span>`;
                }
            } else {
                analysis += `<span class="improve">ğŸ“ˆ You need to improve your score to qualify. Consider focusing on weak areas and practice more. ğŸ’ª</span>`;
            }
            
            analysis += `<br><br><strong>ğŸ“Š Based on ${marks.toFixed(2)} marks and GATE score ${score}:</strong><br>`;
            
            if (qualified) {
                if (rank <= 1000) {
                    analysis += "âœ… High probability for IIT M.Tech admissions ğŸ›ï¸<br>";
                    analysis += "âœ… Good chances for PSU recruitment through GATE ğŸ¢<br>";
                    analysis += "âœ… Eligible for PhD programs in top institutes ğŸ“<br>";
                    analysis += "âœ… Can apply for research fellowships ğŸ“š";
                } else if (rank <= 5000) {
                    analysis += "âœ… Good chances for NITs and IIITs ğŸ«<br>";
                    analysis += "âœ… Eligible for most PSUs through GATE ğŸ¢<br>";
                    analysis += "âœ… Good opportunities for higher studies ğŸ“ˆ<br>";
                    analysis += "âœ… Can apply for junior research fellow positions ğŸ”¬";
                } else {
                    analysis += "âœ… Eligible for admission in many universities ğŸ“<br>";
                    analysis += "âœ… Some PSUs may accept this rank ğŸ¢<br>";
                    analysis += "âœ… Good foundation for further improvement ğŸ“š<br>";
                    analysis += "âœ… Can apply for assistant professor positions ğŸ‘¨â€ğŸ«";
                }
            } else {
                analysis += "âŒ Need to clear cutoff first ğŸ¯<br>";
                analysis += "ğŸ“š Focus on improving weak areas ğŸ’ª<br>";
                analysis += "â±ï¸ Practice time management â³<br>";
                analysis += "ğŸ“ˆ Aim for at least " + (getCutoff(paper, category) + 5).toFixed(1) + " marks to be safe âœ…";
            }
            
            return analysis;
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', function() {
            setValue('type1Correct', 25);
            setValue('type1Wrong', 5);
            setValue('type2Correct', 18);
            setValue('type2Wrong', 3);
            
            updateMarks();
        });
    </script>
</body>
</html>
